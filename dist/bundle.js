/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 10);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!***********************!*\
  !*** ./src/Vector.ts ***!
  \***********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Vector = /** @class */ (function () {\r\n    function Vector(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    Vector.prototype.set = function (x, y) {\r\n        if (x instanceof Vector) {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n        }\r\n        else {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n    };\r\n    Vector.distance = function (a, b) {\r\n        return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\r\n    };\r\n    Vector.prototype.directionTo = function (other) {\r\n        return Math.atan2(other.x - this.x, -(other.y - this.y)) * 180.0 / Math.PI;\r\n    };\r\n    Vector.prototype.rotation = function () {\r\n        return Math.atan2(this.x, -this.y) * 180 / Math.PI;\r\n    };\r\n    Vector.prototype.addDirection = function (degrees, amount) {\r\n        var radians = degrees * Math.PI / 180.0;\r\n        this.x += Math.sin(radians) * amount;\r\n        this.y -= Math.cos(radians) * amount;\r\n        return this;\r\n    };\r\n    Vector.prototype.add = function (other) {\r\n        this.x += other.x;\r\n        this.y += other.y;\r\n        return this;\r\n    };\r\n    Vector.prototype.divide = function (scalar) {\r\n        this.x /= scalar;\r\n        this.y /= scalar;\r\n        return this;\r\n    };\r\n    Vector.prototype.rotate = function (angleDegrees) {\r\n        if (angleDegrees == 0) {\r\n            return this;\r\n        }\r\n        var radians = angleDegrees * Math.PI / 180;\r\n        var tx = this.x;\r\n        this.x = this.x * Math.cos(radians) - this.y * Math.sin(radians);\r\n        this.y = tx * Math.sin(radians) + this.y * Math.cos(radians);\r\n        return this;\r\n    };\r\n    return Vector;\r\n}());\r\nexports.Vector = Vector;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9WZWN0b3IudHM/NjFjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBWZWN0b3Jcclxue1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHggOiBudW1iZXIsIHB1YmxpYyB5IDogbnVtYmVyKSB7fVxyXG4gICAgc2V0KHg6IG51bWJlciwgeTpudW1iZXIpOiB2b2lkO1xyXG4gICAgc2V0KHY6IFZlY3Rvcik6IHZvaWQ7XHJcbiAgICBzZXQoeCA6IG51bWJlciB8IFZlY3RvciwgeT8gOiBudW1iZXIpXHJcbiAgICA6IHZvaWRcclxuICAgIHtcclxuICAgICAgICBpZih4IGluc3RhbmNlb2YgVmVjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gKDxWZWN0b3I+eCkueDtcclxuICAgICAgICAgICAgdGhpcy55ID0gICg8VmVjdG9yPngpLnk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IDxudW1iZXI+eDtcclxuICAgICAgICAgICAgdGhpcy55ID0gPG51bWJlcj55O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBkaXN0YW5jZShhIDogVmVjdG9yLCBiIDogVmVjdG9yKVxyXG4gICAgOiBudW1iZXJcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGEueCAtIGIueCwgMikgKyBNYXRoLnBvdyhhLnkgLSBiLnksIDIpKTtcclxuICAgIH1cclxuICAgIGRpcmVjdGlvblRvKG90aGVyIDogVmVjdG9yKVxyXG4gICAgOiBudW1iZXJcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMihvdGhlci54IC0gdGhpcy54LCAtKG90aGVyLnktdGhpcy55KSkgKiAxODAuMCAvIE1hdGguUEk7XHJcbiAgICB9XHJcbiAgICByb3RhdGlvbigpXHJcbiAgICA6IG51bWJlclxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueCwgLXRoaXMueSkgKiAxODAgLyBNYXRoLlBJO1xyXG4gICAgfVxyXG4gICAgYWRkRGlyZWN0aW9uKGRlZ3JlZXMgOiBudW1iZXIsIGFtb3VudCA6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBsZXQgcmFkaWFucyA9IGRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjA7XHJcbiAgICAgICAgdGhpcy54ICs9IE1hdGguc2luKHJhZGlhbnMpICogYW1vdW50O1xyXG4gICAgICAgIHRoaXMueSAtPSBNYXRoLmNvcyhyYWRpYW5zKSAqIGFtb3VudDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGFkZChvdGhlciA6IFZlY3RvcilcclxuICAgIDogVmVjdG9yXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy54ICs9IG90aGVyLng7XHJcbiAgICAgICAgdGhpcy55ICs9IG90aGVyLnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBkaXZpZGUoc2NhbGFyIDogbnVtYmVyKVxyXG4gICAgOiBWZWN0b3JcclxuICAgIHtcclxuICAgICAgICB0aGlzLnggLz0gc2NhbGFyO1xyXG4gICAgICAgIHRoaXMueSAvPSBzY2FsYXI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICByb3RhdGUoYW5nbGVEZWdyZWVzIDogbnVtYmVyKVxyXG4gICAgOiBWZWN0b3JcclxuICAgIHtcclxuICAgICAgICBpZihhbmdsZURlZ3JlZXMgPT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmFkaWFucyA9IGFuZ2xlRGVncmVlcyAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgbGV0IHR4ID0gdGhpcy54O1xyXG4gICAgICAgIHRoaXMueCA9IHRoaXMueCAqIE1hdGguY29zKHJhZGlhbnMpIC0gdGhpcy55ICogTWF0aC5zaW4ocmFkaWFucyk7XHJcbiAgICAgICAgdGhpcy55ID0gdHggKiBNYXRoLnNpbihyYWRpYW5zKSArIHRoaXMueSAqIE1hdGguY29zKHJhZGlhbnMpOyBcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG5leHBvcnQgeyBWZWN0b3IgfTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvVmVjdG9yLnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!**********************!*\
  !*** ./src/Color.ts ***!
  \**********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/*\r\nColor Definitions from Puzzlescript, which is provided under the following license\r\n----------------------------------------------------------------------------------\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2013 Stephen Lavelle\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\nvar Color = /** @class */ (function () {\r\n    function Color(r, g, b) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n    }\r\n    Object.defineProperty(Color, \"black\", {\r\n        // color accessors\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.black); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"white\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.white); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"grey\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.grey); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"darkgrey\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.darkgrey); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"lightgrey\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.lightgrey); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"gray\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.grey); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"darkgray\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.darkgrey); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"lightgray\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.lightgrey); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"red\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.red); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"darkred\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.darkred); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"lightred\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.lightred); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"brown\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.brown); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"darkbrown\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.darkbrown); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"lightbrown\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.lightbrown); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"green\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.green); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"darkgreen\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.darkgreen); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"lightgreen\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.lightgreen); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"blue\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.blue); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"darkblue\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.darkblue); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"lightblue\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.lightblue); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"orange\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.orange); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"yellow\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.yellow); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"purple\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.purple); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color, \"pink\", {\r\n        get: function () { return Color.hexToRgb(Color.currentPalette.pink); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Color.hexToRgb = function (hex) {\r\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? new Color(parseInt(result[1], 16) / 255.0, parseInt(result[2], 16) / 255.0, parseInt(result[3], 16) / 255.0) : null;\r\n    };\r\n    Color.prototype.toString = function () {\r\n        var rval = this.r * 255.0;\r\n        var gval = this.g * 255.0;\r\n        var bval = this.b * 255.0;\r\n        return \"rgb(\" + rval + \", \" + gval + \", \" + bval + \")\";\r\n    };\r\n    Color.arnecolors = {\r\n        black: \"#000000\",\r\n        white: \"#FFFFFF\",\r\n        grey: \"#9d9d9d\",\r\n        darkgrey: \"#697175\",\r\n        lightgrey: \"#cccccc\",\r\n        gray: \"#9d9d9d\",\r\n        darkgray: \"#697175\",\r\n        lightgray: \"#cccccc\",\r\n        red: \"#be2633\",\r\n        darkred: \"#732930\",\r\n        lightred: \"#e06f8b\",\r\n        brown: \"#a46422\",\r\n        darkbrown: \"#493c2b\",\r\n        lightbrown: \"#eeb62f\",\r\n        orange: \"#eb8931\",\r\n        yellow: \"#f7e26b\",\r\n        green: \"#44891a\",\r\n        darkgreen: \"#2f484e\",\r\n        lightgreen: \"#a3ce27\",\r\n        blue: \"#1d57f7\",\r\n        lightblue: \"#B2DCEF\",\r\n        darkblue: \"#1B2632\",\r\n        purple: \"#342a97\",\r\n        pink: \"#de65e2\"\r\n    };\r\n    Color.currentPalette = Color.arnecolors;\r\n    return Color;\r\n}());\r\nexports.Color = Color;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9Db2xvci50cz8xOTQ4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbkNvbG9yIERlZmluaXRpb25zIGZyb20gUHV6emxlc2NyaXB0LCB3aGljaCBpcyBwcm92aWRlZCB1bmRlciB0aGUgZm9sbG93aW5nIGxpY2Vuc2VcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5UaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxMyBTdGVwaGVuIExhdmVsbGVcclxuXHJcblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG5leHBvcnQgY2xhc3MgQ29sb3Jcclxue1xyXG4gICAgcHVibGljIHIgOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZyA6IG51bWJlcjtcclxuICAgIHB1YmxpYyBiIDogbnVtYmVyO1xyXG4gICAgLy8gY29sb3IgYWNjZXNzb3JzXHJcbiAgICBzdGF0aWMgZ2V0IGJsYWNrKCkgOiBDb2xvciB7IHJldHVybiBDb2xvci5oZXhUb1JnYihDb2xvci5jdXJyZW50UGFsZXR0ZS5ibGFjaykgfVxyXG4gICAgc3RhdGljIGdldCB3aGl0ZSgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUud2hpdGUpIH1cclxuICAgIHN0YXRpYyBnZXQgZ3JleSgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuZ3JleSkgfVxyXG4gICAgc3RhdGljIGdldCBkYXJrZ3JleSgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuZGFya2dyZXkpIH1cclxuICAgIHN0YXRpYyBnZXQgbGlnaHRncmV5KCkgOiBDb2xvciB7IHJldHVybiBDb2xvci5oZXhUb1JnYihDb2xvci5jdXJyZW50UGFsZXR0ZS5saWdodGdyZXkpIH1cclxuICAgIHN0YXRpYyBnZXQgZ3JheSgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuZ3JleSkgfVxyXG4gICAgc3RhdGljIGdldCBkYXJrZ3JheSgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuZGFya2dyZXkpIH1cclxuICAgIHN0YXRpYyBnZXQgbGlnaHRncmF5KCkgOiBDb2xvciB7IHJldHVybiBDb2xvci5oZXhUb1JnYihDb2xvci5jdXJyZW50UGFsZXR0ZS5saWdodGdyZXkpIH1cclxuICAgIHN0YXRpYyBnZXQgcmVkKCkgOiBDb2xvciB7IHJldHVybiBDb2xvci5oZXhUb1JnYihDb2xvci5jdXJyZW50UGFsZXR0ZS5yZWQpIH1cclxuICAgIHN0YXRpYyBnZXQgZGFya3JlZCgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuZGFya3JlZCkgfVxyXG4gICAgc3RhdGljIGdldCBsaWdodHJlZCgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUubGlnaHRyZWQpIH1cclxuICAgIHN0YXRpYyBnZXQgYnJvd24oKSA6IENvbG9yIHsgcmV0dXJuIENvbG9yLmhleFRvUmdiKENvbG9yLmN1cnJlbnRQYWxldHRlLmJyb3duKSB9XHJcbiAgICBzdGF0aWMgZ2V0IGRhcmticm93bigpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuZGFya2Jyb3duKSB9XHJcbiAgICBzdGF0aWMgZ2V0IGxpZ2h0YnJvd24oKSA6IENvbG9yIHsgcmV0dXJuIENvbG9yLmhleFRvUmdiKENvbG9yLmN1cnJlbnRQYWxldHRlLmxpZ2h0YnJvd24pIH1cclxuICAgIHN0YXRpYyBnZXQgZ3JlZW4oKSA6IENvbG9yIHsgcmV0dXJuIENvbG9yLmhleFRvUmdiKENvbG9yLmN1cnJlbnRQYWxldHRlLmdyZWVuKSB9XHJcbiAgICBzdGF0aWMgZ2V0IGRhcmtncmVlbigpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuZGFya2dyZWVuKSB9XHJcbiAgICBzdGF0aWMgZ2V0IGxpZ2h0Z3JlZW4oKSA6IENvbG9yIHsgcmV0dXJuIENvbG9yLmhleFRvUmdiKENvbG9yLmN1cnJlbnRQYWxldHRlLmxpZ2h0Z3JlZW4pIH1cclxuICAgIHN0YXRpYyBnZXQgYmx1ZSgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuYmx1ZSkgfVxyXG4gICAgc3RhdGljIGdldCBkYXJrYmx1ZSgpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUuZGFya2JsdWUpIH1cclxuICAgIHN0YXRpYyBnZXQgbGlnaHRibHVlKCkgOiBDb2xvciB7IHJldHVybiBDb2xvci5oZXhUb1JnYihDb2xvci5jdXJyZW50UGFsZXR0ZS5saWdodGJsdWUpIH1cclxuICAgIHN0YXRpYyBnZXQgb3JhbmdlKCkgOiBDb2xvciB7IHJldHVybiBDb2xvci5oZXhUb1JnYihDb2xvci5jdXJyZW50UGFsZXR0ZS5vcmFuZ2UpIH1cclxuICAgIHN0YXRpYyBnZXQgeWVsbG93KCkgOiBDb2xvciB7IHJldHVybiBDb2xvci5oZXhUb1JnYihDb2xvci5jdXJyZW50UGFsZXR0ZS55ZWxsb3cpIH1cclxuICAgIHN0YXRpYyBnZXQgcHVycGxlKCkgOiBDb2xvciB7IHJldHVybiBDb2xvci5oZXhUb1JnYihDb2xvci5jdXJyZW50UGFsZXR0ZS5wdXJwbGUpIH1cclxuICAgIHN0YXRpYyBnZXQgcGluaygpIDogQ29sb3IgeyByZXR1cm4gQ29sb3IuaGV4VG9SZ2IoQ29sb3IuY3VycmVudFBhbGV0dGUucGluaykgfVxyXG4gICAgc3RhdGljIGFybmVjb2xvcnMgOmFueSA9IHtcclxuICAgICAgICBibGFjayAgIFx0XHQ6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgIHdoaXRlXHRcdFx0OiBcIiNGRkZGRkZcIixcclxuICAgICAgICBncmV5XHRcdFx0OiBcIiM5ZDlkOWRcIixcclxuICAgICAgICBkYXJrZ3JleVx0XHQ6IFwiIzY5NzE3NVwiLFxyXG4gICAgICAgIGxpZ2h0Z3JleVx0XHQ6IFwiI2NjY2NjY1wiLFxyXG4gICAgICAgIGdyYXlcdFx0XHQ6IFwiIzlkOWQ5ZFwiLFxyXG4gICAgICAgIGRhcmtncmF5XHRcdDogXCIjNjk3MTc1XCIsXHJcbiAgICAgICAgbGlnaHRncmF5XHRcdDogXCIjY2NjY2NjXCIsXHJcbiAgICAgICAgcmVkXHRcdFx0XHQ6IFwiI2JlMjYzM1wiLFxyXG4gICAgICAgIGRhcmtyZWRcdFx0XHQ6IFwiIzczMjkzMFwiLFxyXG4gICAgICAgIGxpZ2h0cmVkXHRcdDogXCIjZTA2ZjhiXCIsXHJcbiAgICAgICAgYnJvd25cdFx0XHQ6IFwiI2E0NjQyMlwiLFxyXG4gICAgICAgIGRhcmticm93blx0XHQ6IFwiIzQ5M2MyYlwiLFxyXG4gICAgICAgIGxpZ2h0YnJvd25cdFx0OiBcIiNlZWI2MmZcIixcclxuICAgICAgICBvcmFuZ2VcdFx0XHQ6IFwiI2ViODkzMVwiLFxyXG4gICAgICAgIHllbGxvdyBcdFx0XHQ6IFwiI2Y3ZTI2YlwiLFxyXG4gICAgICAgIGdyZWVuXHRcdFx0OiBcIiM0NDg5MWFcIixcclxuICAgICAgICBkYXJrZ3JlZW5cdFx0OiBcIiMyZjQ4NGVcIixcclxuICAgICAgICBsaWdodGdyZWVuXHRcdDogXCIjYTNjZTI3XCIsXHJcbiAgICAgICAgYmx1ZVx0XHRcdDogXCIjMWQ1N2Y3XCIsXHJcbiAgICAgICAgbGlnaHRibHVlXHRcdDogXCIjQjJEQ0VGXCIsXHJcbiAgICAgICAgZGFya2JsdWVcdFx0OiBcIiMxQjI2MzJcIixcclxuICAgICAgICBwdXJwbGVcdFx0XHQ6IFwiIzM0MmE5N1wiLFxyXG4gICAgICAgIHBpbmtcdFx0XHQ6IFwiI2RlNjVlMlwiXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3VycmVudFBhbGV0dGUgOiBhbnkgPSBDb2xvci5hcm5lY29sb3JzO1xyXG4gICAgY29uc3RydWN0b3IociA6IG51bWJlciwgZyA6IG51bWJlciwgYiA6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICB0aGlzLnIgPSByO1xyXG4gICAgICAgIHRoaXMuZyA9IGc7XHJcbiAgICAgICAgdGhpcy5iID0gYjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaGV4VG9SZ2IoaGV4OnN0cmluZylcclxuICAgIDogKENvbG9yIHwgbnVsbClcclxuICAgIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGhleCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdCA/IG5ldyBDb2xvcihcclxuICAgICAgICAgICAgcGFyc2VJbnQocmVzdWx0WzFdLCAxNikvMjU1LjAsXHJcbiAgICAgICAgICAgIHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLzI1NS4wLFxyXG4gICAgICAgICAgICBwYXJzZUludChyZXN1bHRbM10sIDE2KS8yNTUuMFxyXG4gICAgICAgICApIDogbnVsbDtcclxuICAgIH1cclxuICAgIHB1YmxpYyB0b1N0cmluZygpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJ2YWwgOiBudW1iZXIgPSB0aGlzLnIqMjU1LjA7XHJcbiAgICAgICAgbGV0IGd2YWwgOiBudW1iZXIgPSB0aGlzLmcqMjU1LjA7XHJcbiAgICAgICAgbGV0IGJ2YWwgOiBudW1iZXIgPSB0aGlzLmIqMjU1LjA7XHJcbiAgICAgICAgcmV0dXJuIGByZ2IoJHtydmFsfSwgJHtndmFsfSwgJHtidmFsfSlgO1xyXG4gICAgfVxyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0NvbG9yLnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBeURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUF4REE7QUFEQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTs7O0FBQUE7QUFDQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTs7O0FBQUE7QUFDQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTs7O0FBQUE7QUFDQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTs7O0FBQUE7QUFDQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTs7O0FBQUE7QUFDQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTs7O0FBQUE7QUFDQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTs7O0FBQUE7QUFDQTtBQUFBOzs7QUFBQTtBQUNBO0FBQUE7OztBQUFBO0FBQ0E7QUFBQTs7O0FBQUE7QUFrQ0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBd0JBO0FBQUE7QUFoRkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!*********************!*\
  !*** ./src/Game.ts ***!
  \*********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Display_1 = __webpack_require__(/*! ./Display */ 3);\r\nvar Actor_1 = __webpack_require__(/*! ./Actor */ 6);\r\nvar Config_1 = __webpack_require__(/*! ./Config */ 4);\r\nvar Mouse_1 = __webpack_require__(/*! ./Mouse */ 7);\r\nvar Vector_1 = __webpack_require__(/*! ./Vector */ 0);\r\n__webpack_require__(/*! ./Extensions */ 8);\r\nvar requestAnimationFrameWrapper = window.requestAnimationFrame ||\r\n    window.webkitRequestAnimationFrame ||\r\n    function (callback) {\r\n        window.setTimeout(callback, Game.INTERVAL / 2);\r\n    };\r\nvar requestAnimationFrame = function (callback) {\r\n    requestAnimationFrameWrapper(callback);\r\n};\r\n// create an enum from given values\r\nfunction makeEnum() {\r\n    var vals = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        vals[_i] = arguments[_i];\r\n    }\r\n    var ret = {};\r\n    vals.forEach(function (k) { return ret[k] = k; });\r\n    return ret;\r\n}\r\n// take an existing enum and extend it with more values\r\nfunction extendEnum(firstEnum) {\r\n    var vals = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        vals[_i - 1] = arguments[_i];\r\n    }\r\n    return Object.assign(makeEnum.apply(void 0, vals), firstEnum);\r\n}\r\nvar GameState = makeEnum(\"title\", \"game\");\r\nvar Game = /** @class */ (function () {\r\n    function Game() {\r\n        var _this = this;\r\n        this.currentTime = 0;\r\n        this.previousTime = 0;\r\n        this.delta = 0;\r\n        this.score = 0;\r\n        this.lastScore = -1;\r\n        this.highScore = -1;\r\n        this.currentState = GameState.title;\r\n        if (window.localStorage.getItem(Config_1.Config.saveName)) {\r\n            this.highScore = Number(window.localStorage.getItem(Config_1.Config.saveName));\r\n        }\r\n        Game.INTERVAL = 1000 / Config_1.Config.fps;\r\n        Game.display = new Display_1.Display();\r\n        Mouse_1.Mouse.initialize();\r\n        this.transitionToTitle();\r\n        requestAnimationFrame(function (time) { _this.updateFrame(time); });\r\n    }\r\n    Object.defineProperty(Game.prototype, \"gameOver\", {\r\n        get: function () { return this.currentState != GameState.game; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Game.prototype.transitionToTitle = function () {\r\n        var ty = (Config_1.Config.title.length == 1) ? .4 : .35;\r\n        new Actor_1.TextActor(Config_1.Config.title).setPosition(new Vector_1.Vector(.5, ty)).setDurationForever();\r\n        new Actor_1.TextActor('[ CLICK / TOUCH ] TO START').setPosition(new Vector_1.Vector(.5, .6)).setDurationForever();\r\n        if (this.lastScore >= 0) {\r\n            new Actor_1.TextActor(\"LAST SCORE: \" + this.lastScore).setPosition(new Vector_1.Vector(.5, .7)).setDurationForever();\r\n        }\r\n        if (this.highScore >= 0) {\r\n            if (this.lastScore != this.highScore) {\r\n                new Actor_1.TextActor(\"HIGH SCORE: \" + this.highScore).setPosition(new Vector_1.Vector(.5, .8)).setDurationForever();\r\n            }\r\n            else {\r\n                new Actor_1.TextActor(\"NEW HIGH SCORE!!!\").setPosition(new Vector_1.Vector(.5, .8)).setDurationForever();\r\n            }\r\n        }\r\n    };\r\n    Game.prototype.endGame = function () {\r\n        this.lastScore = this.score;\r\n        if (this.lastScore > 0 && this.lastScore > this.highScore) {\r\n            this.highScore = this.lastScore;\r\n            window.localStorage.setItem(Config_1.Config.saveName, this.highScore.toString());\r\n        }\r\n        this.transitionToTitle();\r\n        this.currentState = GameState.title;\r\n        this.onEndGame();\r\n    };\r\n    Game.prototype.transitionToGame = function () {\r\n        this.currentState = GameState.game;\r\n        this.score = 0;\r\n        Actor_1.Actor.clear();\r\n        this.onBeginGame();\r\n    };\r\n    // override\r\n    Game.prototype.onBeginGame = function () { };\r\n    Game.prototype.onEndGame = function () { };\r\n    Game.prototype.updateTitle = function () {\r\n        if (Mouse_1.Mouse.isPressed) {\r\n            this.transitionToGame();\r\n        }\r\n    };\r\n    Game.prototype.preUpdateFrame = function (time) {\r\n        var _this = this;\r\n        if (time) {\r\n            this.currentTime = time;\r\n        }\r\n        else {\r\n            this.currentTime = new Date().getTime();\r\n        }\r\n        this.delta += (this.currentTime - this.previousTime) / Game.INTERVAL;\r\n        this.previousTime = this.currentTime;\r\n        if (this.delta >= 0.75) {\r\n            return true;\r\n        }\r\n        requestAnimationFrame(function (time) { _this.updateFrame(time); });\r\n        return false;\r\n    };\r\n    Game.prototype.updateFrame = function (time) {\r\n        if (!this.preUpdateFrame(time)) {\r\n            return;\r\n        }\r\n        Game.display.preUpdate();\r\n        Actor_1.Actor.update();\r\n        if (this.currentState == GameState.title) {\r\n            this.updateTitle();\r\n        }\r\n        Game.display.drawText(\"SCORE: \" + this.score, 1, 0, 1);\r\n        this.postUpdateFrame();\r\n    };\r\n    Game.prototype.postUpdateFrame = function () {\r\n        var _this = this;\r\n        this.delta = 0;\r\n        requestAnimationFrame(function (time) { _this.updateFrame(time); });\r\n    };\r\n    return Game;\r\n}());\r\nexports.Game = Game;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9HYW1lLnRzPzczNDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9Db2xvclwiO1xyXG5pbXBvcnQgeyBEaXNwbGF5IH0gZnJvbSBcIi4vRGlzcGxheVwiO1xyXG5pbXBvcnQgeyBBY3RvciwgVGV4dEFjdG9yIH0gZnJvbSBcIi4vQWN0b3JcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4vQ29uZmlnXCI7XHJcbmltcG9ydCB7IE1vdXNlIH0gZnJvbSBcIi4vTW91c2VcIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vVmVjdG9yXCI7XHJcbmltcG9ydCBcIi4vRXh0ZW5zaW9uc1wiO1xyXG5cclxudmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZVdyYXBwZXIgPVxyXG5cdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcdCAgIHx8XHJcblx0d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgZnVuY3Rpb24oY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIEdhbWUuSU5URVJWQUwgLyAyKVxyXG4gICAgfVxyXG52YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gKGNhbGxiYWNrKSA9PlxyXG57XHJcblx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lV3JhcHBlcihjYWxsYmFjaylcclxufVxyXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NjAyNTQ4Ny9jcmVhdGUtZXh0ZW5kYWJsZS1lbnVtcy1mb3ItdXNlLWluLWV4dGVuZGFibGUtaW50ZXJmYWNlc1xyXG50eXBlIEdhbWVTdGF0ZUVudW08VCBleHRlbmRzIHN0cmluZz4gPSB7W0sgaW4gVF06IEt9O1xyXG4vLyBjcmVhdGUgYW4gZW51bSBmcm9tIGdpdmVuIHZhbHVlc1xyXG5mdW5jdGlvbiBtYWtlRW51bTxUIGV4dGVuZHMgc3RyaW5nPiguLi52YWxzOiBUW10pOiBHYW1lU3RhdGVFbnVtPFQ+IHtcclxuICAgIGNvbnN0IHJldCA9IHt9IGFzIEdhbWVTdGF0ZUVudW08VD47XHJcbiAgICB2YWxzLmZvckVhY2goayA9PiByZXRba10gPSBrKVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG4gIFxyXG4gIC8vIHRha2UgYW4gZXhpc3RpbmcgZW51bSBhbmQgZXh0ZW5kIGl0IHdpdGggbW9yZSB2YWx1ZXNcclxuZnVuY3Rpb24gZXh0ZW5kRW51bTxUIGV4dGVuZHMgc3RyaW5nLCBVIGV4dGVuZHMgc3RyaW5nPihcclxuICAgIGZpcnN0RW51bTogR2FtZVN0YXRlRW51bTxUPiwgLi4udmFsczogVVtdKTogR2FtZVN0YXRlRW51bTxUIHwgVT5cclxue1xyXG4gICAgcmV0dXJuICg8YW55Pk9iamVjdCkuYXNzaWduKG1ha2VFbnVtKC4uLnZhbHMpLCBmaXJzdEVudW0pIGFzIGFueTsgIFxyXG59XHJcbmNvbnN0IEdhbWVTdGF0ZSA9IG1ha2VFbnVtKFwidGl0bGVcIiwgXCJnYW1lXCIpO1xyXG50eXBlIEdhbWVTdGF0ZSA9IHR5cGVvZiBHYW1lU3RhdGU7XHJcblxyXG5jbGFzcyBHYW1lXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgSU5URVJWQUwgOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRpc3BsYXk6IERpc3BsYXk7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRUaW1lIDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgcHJldmlvdXNUaW1lIDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgZGVsdGEgOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIHNjb3JlIDogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBsYXN0U2NvcmUgOiBudW1iZXIgPSAtMTtcclxuICAgIHB1YmxpYyBoaWdoU2NvcmUgOiBudW1iZXIgPSAtMTtcclxuICAgIGN1cnJlbnRTdGF0ZSA9IEdhbWVTdGF0ZS50aXRsZTtcclxuICAgIHB1YmxpYyBnZXQgZ2FtZU92ZXIoKSB7IHJldHVybiB0aGlzLmN1cnJlbnRTdGF0ZSE9R2FtZVN0YXRlLmdhbWU7IH1cclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICBpZih3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oQ29uZmlnLnNhdmVOYW1lKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaFNjb3JlID0gTnVtYmVyKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShDb25maWcuc2F2ZU5hbWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgR2FtZS5JTlRFUlZBTCA9IDEwMDAvQ29uZmlnLmZwcztcclxuICAgICAgICBHYW1lLmRpc3BsYXkgPSBuZXcgRGlzcGxheSgpO1xyXG4gICAgICAgIE1vdXNlLmluaXRpYWxpemUoKTtcclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25Ub1RpdGxlKCk7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0aW1lKSA9PiB7dGhpcy51cGRhdGVGcmFtZSh0aW1lKX0pO1xyXG4gICAgfVxyXG4gICAgdHJhbnNpdGlvblRvVGl0bGUoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCB0eSA9IChDb25maWcudGl0bGUubGVuZ3RoID09IDEpPy40Oi4zNTtcclxuICAgICAgICBuZXcgVGV4dEFjdG9yKENvbmZpZy50aXRsZSkuc2V0UG9zaXRpb24obmV3IFZlY3RvciguNSwgdHkpKS5zZXREdXJhdGlvbkZvcmV2ZXIoKVxyXG4gICAgICAgIG5ldyBUZXh0QWN0b3IoJ1sgQ0xJQ0sgLyBUT1VDSCBdIFRPIFNUQVJUJykuc2V0UG9zaXRpb24obmV3IFZlY3RvciguNSwgLjYpKS5zZXREdXJhdGlvbkZvcmV2ZXIoKVxyXG4gICAgICAgIGlmKHRoaXMubGFzdFNjb3JlID49IDApXHJcbiAgICAgICAgeyAgICAgICAgXHJcbiAgICAgICAgICAgIG5ldyBUZXh0QWN0b3IoYExBU1QgU0NPUkU6ICR7dGhpcy5sYXN0U2NvcmV9YCkuc2V0UG9zaXRpb24obmV3IFZlY3RvciguNSwgLjcpKS5zZXREdXJhdGlvbkZvcmV2ZXIoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmhpZ2hTY29yZSA+PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5sYXN0U2NvcmUgIT0gdGhpcy5oaWdoU2NvcmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5ldyBUZXh0QWN0b3IoYEhJR0ggU0NPUkU6ICR7dGhpcy5oaWdoU2NvcmV9YCkuc2V0UG9zaXRpb24obmV3IFZlY3RvciguNSwgLjgpKS5zZXREdXJhdGlvbkZvcmV2ZXIoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmV3IFRleHRBY3RvcihgTkVXIEhJR0ggU0NPUkUhISFgKS5zZXRQb3NpdGlvbihuZXcgVmVjdG9yKC41LCAuOCkpLnNldER1cmF0aW9uRm9yZXZlcigpICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZW5kR2FtZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5sYXN0U2NvcmUgPSB0aGlzLnNjb3JlO1xyXG4gICAgICAgIGlmKHRoaXMubGFzdFNjb3JlID4gMCAmJiB0aGlzLmxhc3RTY29yZSA+IHRoaXMuaGlnaFNjb3JlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5oaWdoU2NvcmUgPSB0aGlzLmxhc3RTY29yZTtcclxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKENvbmZpZy5zYXZlTmFtZSwgdGhpcy5oaWdoU2NvcmUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJhbnNpdGlvblRvVGl0bGUoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IEdhbWVTdGF0ZS50aXRsZTtcclxuICAgICAgICB0aGlzLm9uRW5kR2FtZSgpO1xyXG4gICAgfVxyXG4gICAgdHJhbnNpdGlvblRvR2FtZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSBHYW1lU3RhdGUuZ2FtZTtcclxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgICAgICBBY3Rvci5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMub25CZWdpbkdhbWUoKTtcclxuICAgIH1cclxuICAgIC8vIG92ZXJyaWRlXHJcbiAgICBvbkJlZ2luR2FtZSgpe31cclxuICAgIG9uRW5kR2FtZSgpe31cclxuICAgIHVwZGF0ZVRpdGxlKClcclxuICAgIHtcclxuICAgICAgICBpZihNb3VzZS5pc1ByZXNzZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25Ub0dhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcmVVcGRhdGVGcmFtZSh0aW1lIDogYW55KVxyXG4gICAgOmJvb2xlYW5cclxuICAgIHtcclxuICAgICAgICBpZih0aW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IHRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kZWx0YSArPSAodGhpcy5jdXJyZW50VGltZSAtIHRoaXMucHJldmlvdXNUaW1lKSAvIEdhbWUuSU5URVJWQUw7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1RpbWUgPSB0aGlzLmN1cnJlbnRUaW1lO1xyXG4gICAgICAgIGlmKHRoaXMuZGVsdGEgPj0gMC43NSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKHRpbWUpID0+IHt0aGlzLnVwZGF0ZUZyYW1lKHRpbWUpfSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRnJhbWUodGltZSA6IGFueSlcclxuICAgIHtcclxuICAgICAgICBpZighdGhpcy5wcmVVcGRhdGVGcmFtZSh0aW1lKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgR2FtZS5kaXNwbGF5LnByZVVwZGF0ZSgpO1xyXG4gICAgICAgIEFjdG9yLnVwZGF0ZSgpO1xyXG4gICAgICAgIGlmKHRoaXMuY3VycmVudFN0YXRlID09IEdhbWVTdGF0ZS50aXRsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGl0bGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgR2FtZS5kaXNwbGF5LmRyYXdUZXh0KGBTQ09SRTogJHt0aGlzLnNjb3JlfWAsIDEsMCwxKTtcclxuICAgICAgICB0aGlzLnBvc3RVcGRhdGVGcmFtZSgpO1xyXG4gICAgfVxyXG4gICAgcG9zdFVwZGF0ZUZyYW1lKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmRlbHRhID0gMDtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKHRpbWUpID0+IHt0aGlzLnVwZGF0ZUZyYW1lKHRpbWUpfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIHRlc3QgZ2FtZSwgc2hvdWxkIG1vdmUgdGhpcyBlbHNld2hlcmUuLi5cclxuXHJcblxyXG5leHBvcnQgeyBHYW1lIH07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0dhbWUudHMiXSwibWFwcGluZ3MiOiI7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBWUE7QUFBQTtBQVJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFBQTs7O0FBQUE7QUFhQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!************************!*\
  !*** ./src/Display.ts ***!
  \************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Color_1 = __webpack_require__(/*! ./Color */ 1);\r\nvar Vector_1 = __webpack_require__(/*! ./Vector */ 0);\r\nvar Config_1 = __webpack_require__(/*! ./Config */ 4);\r\nvar Drawing_1 = __webpack_require__(/*! ./Drawing */ 5);\r\nvar Display = /** @class */ (function () {\r\n    function Display() {\r\n        var _this = this;\r\n        this.textDrawer = new Drawing_1.TextDrawer();\r\n        var displayElement = document.getElementById(\"display\");\r\n        Display.element = displayElement;\r\n        this.context = Display.element.getContext(\"2d\");\r\n        window.onresize = function () {\r\n            if (_this.resizeTimer) {\r\n                clearTimeout(_this.resizeTimer);\r\n            }\r\n            _this.resizeTimer = setTimeout(_this.setSize, 200);\r\n        };\r\n        this.setSize();\r\n    }\r\n    Display.prototype.setSize = function () {\r\n        var clientWidth = Display.element.clientWidth;\r\n        Display.element.width = Display.element.height = clientWidth;\r\n        Display.size.set(clientWidth, clientWidth);\r\n    };\r\n    Display.prototype.clear = function () {\r\n        this.context.fillStyle = Config_1.Config.backgroundColor.toString();\r\n        this.context.fillRect(0, 0, Display.size.x, Display.size.y);\r\n    };\r\n    Display.prototype.preUpdate = function () {\r\n        this.clear();\r\n    };\r\n    Display.prototype.fillRect = function (x, y, width, height, color) {\r\n        if (color === void 0) { color = Color_1.Color.white; }\r\n        this.context.fillStyle = color.toString();\r\n        this.context.fillRect((x - width / 2) * Display.size.x, (y - height / 2) * Display.size.y, width * Display.size.x, height * Display.size.y);\r\n    };\r\n    Display.prototype.fillRectDirect = function (x, y, width, height, color) {\r\n        if (color === void 0) { color = Color_1.Color.white; }\r\n        this.context.fillStyle = color.toString();\r\n        this.context.fillRect(x, y, width, height);\r\n    };\r\n    Display.prototype.drawText = function (text, x, y, alignX, alignY, color, scale) {\r\n        if (alignX === void 0) { alignX = -1; }\r\n        if (alignY === void 0) { alignY = -1; }\r\n        if (color === void 0) { color = Color_1.Color.white; }\r\n        if (scale === void 0) { scale = 1; }\r\n        this.textDrawer.setSize(Display.size);\r\n        this.textDrawer.drawString(text, x, y, alignX, alignY, color, scale);\r\n    };\r\n    Display.size = new Vector_1.Vector(0, 0);\r\n    return Display;\r\n}());\r\nexports.Display = Display;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9EaXNwbGF5LnRzPzUwY2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9Db2xvclwiO1xyXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4vQ29uZmlnXCI7XHJcbmltcG9ydCB7IFRleHREcmF3ZXIgfSBmcm9tIFwiLi9EcmF3aW5nXCJcclxuZXhwb3J0IGNsYXNzIERpc3BsYXlcclxue1xyXG4gICAgc3RhdGljIGVsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBzdGF0aWMgc2l6ZSA6IFZlY3RvciA9IG5ldyBWZWN0b3IoMCwwKTtcclxuICAgIHByaXZhdGUgcmVzaXplVGltZXIgOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRleHREcmF3ZXIgOiBUZXh0RHJhd2VyID0gbmV3IFRleHREcmF3ZXIoKTtcclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICBsZXQgZGlzcGxheUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpc3BsYXlcIik7XHJcbiAgICAgICAgRGlzcGxheS5lbGVtZW50ID0gPEhUTUxDYW52YXNFbGVtZW50PmRpc3BsYXlFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IERpc3BsYXkuZWxlbWVudC5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih0aGlzLnJlc2l6ZVRpbWVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZXNpemVUaW1lciA9IHNldFRpbWVvdXQodGhpcy5zZXRTaXplLCAyMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFNpemUoKTtcclxuICAgIH1cclxuICAgIHNldFNpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBjbGllbnRXaWR0aCA9IERpc3BsYXkuZWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICBEaXNwbGF5LmVsZW1lbnQud2lkdGggPSBEaXNwbGF5LmVsZW1lbnQuaGVpZ2h0ID0gY2xpZW50V2lkdGggXHJcbiAgICAgICAgRGlzcGxheS5zaXplLnNldChjbGllbnRXaWR0aCwgY2xpZW50V2lkdGgpO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBDb25maWcuYmFja2dyb3VuZENvbG9yLnRvU3RyaW5nKClcclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwwLERpc3BsYXkuc2l6ZS54LCBEaXNwbGF5LnNpemUueSk7XHJcbiAgICB9XHJcbiAgICBwcmVVcGRhdGUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIGZpbGxSZWN0KHggOiBudW1iZXIseSA6IG51bWJlcix3aWR0aCA6IG51bWJlcixoZWlnaHQgOiBudW1iZXIsIGNvbG9yIDogQ29sb3IgPSBDb2xvci53aGl0ZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gY29sb3IudG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoXHJcbiAgICAgICAgICAgICh4LXdpZHRoLzIpICogRGlzcGxheS5zaXplLngsXHJcbiAgICAgICAgICAgICh5LWhlaWdodCAvIDIpICogRGlzcGxheS5zaXplLnksXHJcbiAgICAgICAgICAgIHdpZHRoICogRGlzcGxheS5zaXplLngsXHJcbiAgICAgICAgICAgIGhlaWdodCAqIERpc3BsYXkuc2l6ZS55XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIGZpbGxSZWN0RGlyZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQsIGNvbG9yID0gQ29sb3Iud2hpdGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgZHJhd1RleHQodGV4dCA6IHN0cmluZywgeCA6IG51bWJlciwgeSA6IG51bWJlciwgYWxpZ25YID0gLTEsIGFsaWduWSA9IC0xLCBjb2xvciA9IENvbG9yLndoaXRlLCBzY2FsZSA9IDEpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy50ZXh0RHJhd2VyLnNldFNpemUoRGlzcGxheS5zaXplKTtcclxuICAgICAgICB0aGlzLnRleHREcmF3ZXIuZHJhd1N0cmluZyh0ZXh0LCB4LCB5LCBhbGlnblgsIGFsaWduWSwgY29sb3IsIHNjYWxlKTtcclxuICAgIH1cclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9EaXNwbGF5LnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBcERBO0FBcURBO0FBQUE7QUF6REE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!***********************!*\
  !*** ./src/Config.ts ***!
  \***********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Color_1 = __webpack_require__(/*! ./Color */ 1);\r\nvar Config = /** @class */ (function () {\r\n    function Config() {\r\n    }\r\n    Config.fps = 60;\r\n    Config.backgroundColor = Color_1.Color.black;\r\n    Config.soundTempo = 120;\r\n    Config.soundVolume = 0.02;\r\n    Config.debugMode = true;\r\n    Config.title = \"GAME TITLE\";\r\n    Config.saveName = \"Wormdrive2hs\";\r\n    return Config;\r\n}());\r\nexports.Config = Config;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9Db25maWcudHM/MGQwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuL0NvbG9yXCI7XHJcblxyXG5jbGFzcyBDb25maWdcclxue1xyXG4gICAgc3RhdGljIGZwczogbnVtYmVyID0gNjA7XHJcbiAgICBzdGF0aWMgYmFja2dyb3VuZENvbG9yIDogQ29sb3IgPSBDb2xvci5ibGFjaztcclxuICAgIHN0YXRpYyBzb3VuZFRlbXBvIDogbnVtYmVyID0gMTIwO1xyXG4gICAgc3RhdGljIHNvdW5kVm9sdW1lIDogbnVtYmVyID0gMC4wMjtcclxuICAgIHN0YXRpYyBkZWJ1Z01vZGUgOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHN0YXRpYyB0aXRsZSA6IHN0cmluZyA9IFwiR0FNRSBUSVRMRVwiO1xyXG4gICAgc3RhdGljIHNhdmVOYW1lIDogc3RyaW5nID0gXCJXb3JtZHJpdmUyaHNcIlxyXG59XHJcbmV4cG9ydCB7IENvbmZpZyB9XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0NvbmZpZy50cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBO0FBQUE7QUFTQTtBQVBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/*!************************!*\
  !*** ./src/Drawing.ts ***!
  \************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Game_1 = __webpack_require__(/*! ./Game */ 2);\r\nvar Vector_1 = __webpack_require__(/*! ./Vector */ 0);\r\nvar Display_1 = __webpack_require__(/*! ./Display */ 3);\r\nvar TextDrawer = /** @class */ (function () {\r\n    function TextDrawer() {\r\n        this.dotPatterns = [];\r\n        this.charToIndex = [];\r\n        this.baseDotSize = 1;\r\n        var p = 0;\r\n        var d = 32;\r\n        var pIndex = 0;\r\n        for (var i = 1; i <= TextDrawer.COUNT; i++) {\r\n            var dots = [];\r\n            for (var j = 1; j <= 5; j++) {\r\n                for (var k = 1; k <= 4; k++) {\r\n                    d++;\r\n                    if (d >= 32) {\r\n                        p = TextDrawer.patterns[pIndex++];\r\n                        d = 0;\r\n                    }\r\n                    if ((p & 1) > 0) {\r\n                        dots.push(new Vector_1.Vector(k, j));\r\n                    }\r\n                    p >>= 1;\r\n                }\r\n            }\r\n            this.dotPatterns.push(dots);\r\n        }\r\n        var charStr = \"()[]<>=+-*/%&_!?,.:|'\\\"$@#\\\\urdl\";\r\n        for (var c = 0; c <= 127; c++) {\r\n            var li = void 0;\r\n            if (c == 32) {\r\n                li = -1;\r\n            }\r\n            else if (48 <= c && c < 58) {\r\n                li = c - 48;\r\n            }\r\n            else if (65 <= c && c < 90) {\r\n                li = c - 65 + 10;\r\n            }\r\n            else {\r\n                var ci = charStr.indexOf(String.fromCharCode(c));\r\n                if (ci >= 0) {\r\n                    li = ci + 36;\r\n                }\r\n                else {\r\n                    li = -2;\r\n                }\r\n            }\r\n            this.charToIndex.push(li);\r\n        }\r\n    }\r\n    TextDrawer.prototype.drawString = function (text, x, y, xAlign, yAlign, color, scale) {\r\n        var tx = Math.floor(x * Display_1.Display.size.x);\r\n        var ty = Math.floor(y * Display_1.Display.size.y);\r\n        var size = this.baseDotSize * scale;\r\n        var lw = size * 5;\r\n        if (xAlign == 0) {\r\n            tx -= Math.floor(text.length * lw / 2);\r\n        }\r\n        else if (xAlign == 1) {\r\n            tx -= Math.floor(text.length * lw);\r\n        }\r\n        if (yAlign == 0) {\r\n            ty -= Math.floor(size * 3.5);\r\n        }\r\n        for (var i = 0; i < text.length; i++) {\r\n            var c = text[i];\r\n            var li = this.charToIndex[c.charCodeAt(0)];\r\n            if (li >= 0) {\r\n                this.drawDots(li, tx, ty, color, size);\r\n            }\r\n            else if (li == -2) {\r\n                throw \"invalid char: \" + c;\r\n            }\r\n            tx += lw;\r\n        }\r\n        return;\r\n    };\r\n    TextDrawer.prototype.drawDots = function (li, x, y, color, size) {\r\n        for (var i = 0; i < this.dotPatterns[li].length; i++) {\r\n            var p = this.dotPatterns[li][i];\r\n            Game_1.Game.display.fillRectDirect(x + p.x * size, y + p.y * size, size, size, color);\r\n        }\r\n    };\r\n    TextDrawer.prototype.setSize = function (size) {\r\n        this.baseDotSize = Math.floor((Math.min(size.x, size.y)) / 250 + 1).clamp(1, 20);\r\n    };\r\n    TextDrawer.COUNT = 66;\r\n    TextDrawer.patterns = [\r\n        0x4644AAA4, 0x6F2496E4, 0xF5646949, 0x167871F4, 0x2489F697,\r\n        0xE9669696, 0x79F99668, 0x91967979, 0x1F799976, 0x1171FF17,\r\n        0xF99ED196, 0xEE444E99, 0x53592544, 0xF9F11119, 0x9DDB9999,\r\n        0x79769996, 0x7ED99611, 0x861E9979, 0x994444E7, 0x46699699,\r\n        0x6996FD99, 0xF4469999, 0x2224F248, 0x26244424, 0x64446622,\r\n        0x84284248, 0x40F0F024, 0x0F0044E4, 0x480A4E40, 0x9A459124,\r\n        0x000A5A16, 0x640444F0, 0x80004049, 0x40400004, 0x44444040,\r\n        0x0AA00044, 0x6476E400, 0xFAFA61D9, 0xE44E4EAA, 0x24F42445,\r\n        0xF244E544, 0x00000042\r\n    ];\r\n    return TextDrawer;\r\n}());\r\nexports.TextDrawer = TextDrawer;\r\nvar DrawingRect = /** @class */ (function () {\r\n    function DrawingRect(color, width, height, offsetX, offsetY, hasCollision) {\r\n        this.color = color;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.offsetX = offsetX;\r\n        this.offsetY = offsetY;\r\n        this.hasCollision = hasCollision;\r\n        this.currentPosition = new Vector_1.Vector(0, 0);\r\n        this.currentSize = new Vector_1.Vector(0, 0);\r\n    }\r\n    DrawingRect.prototype.updateState = function (drawing) {\r\n        this.currentPosition.set(this.offsetX, this.offsetY);\r\n        this.currentPosition.rotate(drawing.rotation);\r\n        this.currentPosition.add(drawing.position);\r\n        this.currentSize.set(this.width * drawing.scale.x, this.height * drawing.scale.y);\r\n    };\r\n    DrawingRect.prototype.draw = function (drawing) {\r\n        this.updateState(drawing);\r\n        Game_1.Game.display.fillRect(this.currentPosition.x, this.currentPosition.y, this.currentSize.x, this.currentSize.y, this.color);\r\n    };\r\n    DrawingRect.prototype.isOverlapping = function (other) {\r\n        if (!this.hasCollision || !other.hasCollision) {\r\n            return false;\r\n        }\r\n        return Math.abs(this.currentPosition.x - other.currentPosition.x) < (this.currentSize.x + other.currentSize.x) / 2 && Math.abs(this.currentPosition.y - other.currentPosition.y) < (this.currentSize.y + other.currentSize.y) / 2;\r\n    };\r\n    return DrawingRect;\r\n}());\r\nvar Drawing = /** @class */ (function () {\r\n    function Drawing() {\r\n        this.position = new Vector_1.Vector(0, 0);\r\n        this.rotation = 0;\r\n        this.scale = new Vector_1.Vector(1, 1);\r\n        this.rects = [];\r\n        this.hasCollision = true;\r\n    }\r\n    Drawing.prototype.setColor = function (color) {\r\n        this.color = color;\r\n        return this;\r\n    };\r\n    Drawing.prototype.addRect = function (width, height, offsetX, offsetY) {\r\n        if (height === void 0) { height = 0; }\r\n        if (offsetX === void 0) { offsetX = 0; }\r\n        if (offsetY === void 0) { offsetY = 0; }\r\n        this.rects.push(new DrawingRect(this.color, width, height == 0 ? width : height, offsetX, offsetY, this.hasCollision));\r\n        this.lastAdded = new Drawing.RectParam('rect', width, height == 0 ? width : height, offsetX, offsetY);\r\n        return this;\r\n    };\r\n    Drawing.prototype.addSegementedRect = function (width, height, offsetX, offsetY, angle) {\r\n        if (height === void 0) { height = 0; }\r\n        if (offsetX === void 0) { offsetX = 0; }\r\n        if (offsetY === void 0) { offsetY = 0; }\r\n        if (angle === void 0) { angle = 0; }\r\n        this.lastAdded = new Drawing.RectParam('segmentedRect', width, height == 0 ? width : height, offsetX, offsetY, angle);\r\n        var radians = angle * Math.PI / 180;\r\n        if (width > height) {\r\n            radians += Math.PI / 2;\r\n            var twidth = width;\r\n            width = height;\r\n            height = twidth;\r\n        }\r\n        if (width < 0.01) {\r\n            return this;\r\n        }\r\n        var n = Math.floor(height / width);\r\n        var o = -width * (n - 1) / 2;\r\n        var vo = width;\r\n        width *= 1.05;\r\n        for (var i = 0; i < n; i++) {\r\n            this.rects.push(new DrawingRect(this.color, width, width, Math.sin(radians) * o + offsetX, Math.cos(radians) * o + offsetY, this.hasCollision));\r\n            o += vo;\r\n        }\r\n        return this;\r\n    };\r\n    Drawing.prototype.addArc = function (angle, count) {\r\n        if (count === void 0) { count = 1; }\r\n        var offset = new Vector_1.Vector(this.lastAdded.offsetX, this.lastAdded.offsetY);\r\n        var currentAngle = this.lastAdded.angle;\r\n        for (var i = 0; i < count; i++) {\r\n            offset.rotate(angle);\r\n            if (this.lastAdded.type == 'rect') {\r\n                this.addRect(this.lastAdded.width, this.lastAdded.height, offset.x, offset.y);\r\n            }\r\n            else {\r\n                currentAngle -= angle;\r\n                this.addSegementedRect(this.lastAdded.width, this.lastAdded.height, offset.x, offset.y, currentAngle);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    Drawing.prototype.mirrorX = function () {\r\n        if (this.lastAdded.type == 'rect') {\r\n            this.addRect(this.lastAdded.width, this.lastAdded.height, -this.lastAdded.offsetX, this.lastAdded.offsetY);\r\n        }\r\n        else {\r\n        }\r\n        return this;\r\n    };\r\n    Drawing.prototype.mirrorY = function () {\r\n        if (this.lastAdded.type == 'rect') {\r\n            this.addRect(this.lastAdded.width, this.lastAdded.height, this.lastAdded.offsetX, -this.lastAdded.offsetY);\r\n        }\r\n        else {\r\n        }\r\n        return this;\r\n    };\r\n    Drawing.prototype.updateState = function () {\r\n        var _this = this;\r\n        this.rects.forEach(function (rect) {\r\n            rect.updateState(_this);\r\n        });\r\n    };\r\n    Drawing.prototype.setPosition = function (v) {\r\n        this.position.set(v);\r\n        return this;\r\n    };\r\n    Drawing.prototype.setRotation = function (r) {\r\n        this.rotation = r;\r\n        return this;\r\n    };\r\n    Drawing.prototype.draw = function () {\r\n        var _this = this;\r\n        this.rects.forEach(function (rect) {\r\n            rect.draw(_this);\r\n        });\r\n    };\r\n    Drawing.prototype.isOverlapping = function (other) {\r\n        this.updateState();\r\n        for (var i = 0; i < this.rects.length; i++) {\r\n            var rect = this.rects[i];\r\n            for (var j = 0; j < other.rects.length; j++) {\r\n                var otherRect = other.rects[j];\r\n                if (rect.isOverlapping(otherRect)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Drawing.RectParam = /** @class */ (function () {\r\n        function class_1(type, width, height, offsetX, offsetY, angle) {\r\n            if (angle === void 0) { angle = 0; }\r\n            this.type = type;\r\n            this.width = width;\r\n            this.height = height;\r\n            this.offsetX = offsetX;\r\n            this.offsetY = offsetY;\r\n            this.angle = angle;\r\n        }\r\n        return class_1;\r\n    }());\r\n    return Drawing;\r\n}());\r\nexports.Drawing = Drawing;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9EcmF3aW5nLnRzP2Q1YTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9Db2xvclwiO1xyXG5pbXBvcnQgeyBBY3RvciB9IGZyb20gXCIuL0FjdG9yXCI7XHJcbmltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9HYW1lXCI7XHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuL1ZlY3RvclwiO1xyXG5pbXBvcnQgeyBEaXNwbGF5IH0gZnJvbSBcIi4vRGlzcGxheVwiO1xyXG5jbGFzcyBUZXh0RHJhd2VyXHJcbntcclxuICAgIHN0YXRpYyBDT1VOVCA6IG51bWJlciA9IDY2XHJcbiAgICBkb3RQYXR0ZXJucyA6IFZlY3RvcltdW10gPSBbXTtcclxuICAgIGNoYXJUb0luZGV4IDogbnVtYmVyW10gPSBbXTtcclxuICAgIHN0YXRpYyBwYXR0ZXJucyA6IG51bWJlcltdID0gW1xyXG4gICAgICAgIDB4NDY0NEFBQTQsIDB4NkYyNDk2RTQsIDB4RjU2NDY5NDksIDB4MTY3ODcxRjQsIDB4MjQ4OUY2OTcsXHJcbiAgICAgICAgMHhFOTY2OTY5NiwgMHg3OUY5OTY2OCwgMHg5MTk2Nzk3OSwgMHgxRjc5OTk3NiwgMHgxMTcxRkYxNyxcclxuICAgICAgICAweEY5OUVEMTk2LCAweEVFNDQ0RTk5LCAweDUzNTkyNTQ0LCAweEY5RjExMTE5LCAweDlEREI5OTk5LFxyXG4gICAgICAgIDB4Nzk3Njk5OTYsIDB4N0VEOTk2MTEsIDB4ODYxRTk5NzksIDB4OTk0NDQ0RTcsIDB4NDY2OTk2OTksXHJcbiAgICAgICAgMHg2OTk2RkQ5OSwgMHhGNDQ2OTk5OSwgMHgyMjI0RjI0OCwgMHgyNjI0NDQyNCwgMHg2NDQ0NjYyMixcclxuICAgICAgICAweDg0Mjg0MjQ4LCAweDQwRjBGMDI0LCAweDBGMDA0NEU0LCAweDQ4MEE0RTQwLCAweDlBNDU5MTI0LFxyXG4gICAgICAgIDB4MDAwQTVBMTYsIDB4NjQwNDQ0RjAsIDB4ODAwMDQwNDksIDB4NDA0MDAwMDQsIDB4NDQ0NDQwNDAsXHJcbiAgICAgICAgMHgwQUEwMDA0NCwgMHg2NDc2RTQwMCwgMHhGQUZBNjFEOSwgMHhFNDRFNEVBQSwgMHgyNEY0MjQ0NSxcclxuICAgICAgICAweEYyNDRFNTQ0LCAweDAwMDAwMDQyXHJcbiAgICAgICAgXVxyXG4gICAgYmFzZURvdFNpemUgPSAxO1xyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBwID0gMFxyXG4gICAgICAgIGxldCBkID0gMzJcclxuICAgICAgICBsZXQgcEluZGV4ID0gMFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IFRleHREcmF3ZXIuQ09VTlQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZG90cyA6IFZlY3RvcltdID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IDU7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDE7IGsgPD0gNDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGQgPj0gMzIpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gVGV4dERyYXdlci5wYXR0ZXJuc1twSW5kZXgrK11cclxuICAgICAgICAgICAgICAgICAgICAgICAgZCA9IDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoKHAgJiAxKSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzLnB1c2gobmV3IFZlY3RvcihrLCBqKSk7IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwID4+PSAxXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kb3RQYXR0ZXJucy5wdXNoKGRvdHMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjaGFyU3RyID0gXCIoKVtdPD49Ky0qLyUmXyE/LC46fCdcXFwiJEAjXFxcXHVyZGxcIlxyXG4gICAgICAgIGZvcihsZXQgYyA9MDtjPD0xMjc7YysrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGxpO1xyXG4gICAgICAgICAgICBpZihjPT0zMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGkgPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKDQ4IDw9IGMgJiYgYyA8IDU4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsaSA9IGMtNDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZig2NSA8PSBjICYmIGMgPCA5MClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGkgPSBjLTY1KzEwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNpID0gY2hhclN0ci5pbmRleE9mKFN0cmluZy5mcm9tQ2hhckNvZGUoYykpXHJcbiAgICAgICAgICAgICAgICBpZihjaSA+PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpID0gY2krMzY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkgPSAtMlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvSW5kZXgucHVzaChsaSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhd1N0cmluZyh0ZXh0IDogc3RyaW5nLCB4LCB5LCB4QWxpZ24sIHlBbGlnbiwgY29sb3IgOiBDb2xvciwgc2NhbGUgOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHR4ID0gTWF0aC5mbG9vcih4ICogRGlzcGxheS5zaXplLngpXHJcblx0XHRsZXQgdHkgPSBNYXRoLmZsb29yKHkgKiBEaXNwbGF5LnNpemUueSlcclxuXHRcdGxldCBzaXplID0gdGhpcy5iYXNlRG90U2l6ZSAqIHNjYWxlO1xyXG5cdFx0bGV0IGx3ID0gc2l6ZSAqIDU7XHJcbiAgICAgICAgaWYoeEFsaWduID09IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eCAtPSBNYXRoLmZsb29yKHRleHQubGVuZ3RoICogbHcgLyAyKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHhBbGlnbiA9PSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHggLT0gTWF0aC5mbG9vcih0ZXh0Lmxlbmd0aCAqIGx3KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih5QWxpZ24gPT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHR5IC09IE1hdGguZmxvb3Ioc2l6ZSAqIDMuNSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMgPSB0ZXh0W2ldO1xyXG4gICAgICAgICAgICBsZXQgbGkgPSB0aGlzLmNoYXJUb0luZGV4W2MuY2hhckNvZGVBdCgwKV07XHJcbiAgICAgICAgICAgIGlmKGxpID49IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0RvdHMobGksIHR4LCB0eSwgY29sb3IsIHNpemUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihsaSA9PSAtMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgYGludmFsaWQgY2hhcjogJHtjfWBcclxuICAgICAgICAgICAgfVx0XHJcblx0XHRcdHR4ICs9IGx3ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgZHJhd0RvdHMobGksIHgsIHksIGNvbG9yLCBzaXplKVxyXG4gICAge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kb3RQYXR0ZXJuc1tsaV0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMuZG90UGF0dGVybnNbbGldW2ldO1xyXG4gICAgICAgICAgICBHYW1lLmRpc3BsYXkuZmlsbFJlY3REaXJlY3QoeCArIHAueCAqIHNpemUsIHkgKyBwLnkgKiBzaXplLFxyXG4gICAgICAgICAgICAgICAgc2l6ZSwgc2l6ZSwgY29sb3IpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldFNpemUoc2l6ZSA6IFZlY3RvcilcclxuICAgIHtcclxuICAgICAgICB0aGlzLmJhc2VEb3RTaXplID0gTWF0aC5mbG9vcigoTWF0aC5taW4oc2l6ZS54LCBzaXplLnkpKSAvIDI1MCArIDEpLmNsYW1wKDEsIDIwKVxyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuY2xhc3MgRHJhd2luZ1JlY3Rcclxue1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50UG9zaXRpb24gOiBWZWN0b3IgPSBuZXcgVmVjdG9yKDAsMCk7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRTaXplIDogVmVjdG9yID0gbmV3IFZlY3RvcigwLDApO1xyXG4gICAgcHJpdmF0ZVxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIGNvbG9yIDogQ29sb3IsXHJcbiAgICAgICAgcHVibGljIHdpZHRoIDogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyBoZWlnaHQgOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIG9mZnNldFggOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIG9mZnNldFkgOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIGhhc0NvbGxpc2lvbilcclxuICAgIHsgfVxyXG4gICAgdXBkYXRlU3RhdGUoZHJhd2luZyA6IERyYXdpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24uc2V0KHRoaXMub2Zmc2V0WCwgdGhpcy5vZmZzZXRZKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQb3NpdGlvbi5yb3RhdGUoZHJhd2luZy5yb3RhdGlvbik7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24uYWRkKGRyYXdpbmcucG9zaXRpb24pO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNpemUuc2V0KHRoaXMud2lkdGgqZHJhd2luZy5zY2FsZS54LCB0aGlzLmhlaWdodCpkcmF3aW5nLnNjYWxlLnkpO1xyXG4gICAgfVxyXG4gICAgZHJhdyhkcmF3aW5nIDogRHJhd2luZylcclxuICAgIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKGRyYXdpbmcpO1xyXG4gICAgICAgIEdhbWUuZGlzcGxheS5maWxsUmVjdChcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24ueCxcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24ueSxcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2l6ZS54LFxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTaXplLnksXHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IpO1xyXG4gICAgfVxyXG4gICAgaXNPdmVybGFwcGluZyhvdGhlciA6IERyYXdpbmdSZWN0KVxyXG4gICAgOiBib29sZWFuXHJcbiAgICB7XHJcbiAgICAgICAgaWYoIXRoaXMuaGFzQ29sbGlzaW9uIHx8ICFvdGhlci5oYXNDb2xsaXNpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSAgICAgICBcclxuICAgICAgICByZXR1cm4gTWF0aC5hYnModGhpcy5jdXJyZW50UG9zaXRpb24ueCAtIG90aGVyLmN1cnJlbnRQb3NpdGlvbi54KSA8ICh0aGlzLmN1cnJlbnRTaXplLnggKyBvdGhlci5jdXJyZW50U2l6ZS54KSAvIDIgJiYgTWF0aC5hYnModGhpcy5jdXJyZW50UG9zaXRpb24ueSAtIG90aGVyLmN1cnJlbnRQb3NpdGlvbi55KSA8ICh0aGlzLmN1cnJlbnRTaXplLnkgKyBvdGhlci5jdXJyZW50U2l6ZS55KSAvIDI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERyYXdpbmdcclxue1xyXG4gICAgc3RhdGljIFJlY3RQYXJhbSA9IGNsYXNzIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdHlwZSA6IHN0cmluZywgcHVibGljIHdpZHRoIDogbnVtYmVyLCBwdWJsaWMgaGVpZ2h0IDogbnVtYmVyLCBwdWJsaWMgb2Zmc2V0WCA6IG51bWJlciwgcHVibGljIG9mZnNldFkgOiBudW1iZXIsIHB1YmxpYyBhbmdsZSA6IG51bWJlcj0wKSB7fVxyXG4gICAgfVxyXG4gICAgcG9zaXRpb24gOiBWZWN0b3IgPSBuZXcgVmVjdG9yKDAsMCk7XHJcbiAgICByb3RhdGlvbiA6IG51bWJlciA9IDA7XHJcbiAgICBzY2FsZSA6IFZlY3RvciA9IG5ldyBWZWN0b3IoMSwxKTsgXHJcbiAgICBwcml2YXRlIHJlY3RzIDogRHJhd2luZ1JlY3RbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBjb2xvciA6IENvbG9yO1xyXG4gICAgaGFzQ29sbGlzaW9uIDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIGxhc3RBZGRlZCA6IGFueTtcclxuICAgIHNldENvbG9yKGNvbG9yIDogQ29sb3IpXHJcbiAgICA6IERyYXdpbmdcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBhZGRSZWN0KHdpZHRoIDogbnVtYmVyLCBoZWlnaHQgOiBudW1iZXIgPSAwLCBvZmZzZXRYIDogbnVtYmVyID0gMCwgb2Zmc2V0WSA6IG51bWJlciA9IDApXHJcbiAgICA6IERyYXdpbmdcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlY3RzLnB1c2gobmV3IERyYXdpbmdSZWN0KFxyXG4gICAgICAgICAgICB0aGlzLmNvbG9yLFxyXG4gICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0PT0wP3dpZHRoOmhlaWdodCxcclxuICAgICAgICAgICAgb2Zmc2V0WCxcclxuICAgICAgICAgICAgb2Zmc2V0WSxcclxuICAgICAgICAgICAgdGhpcy5oYXNDb2xsaXNpb24pKTtcclxuICAgICAgICB0aGlzLmxhc3RBZGRlZCA9IG5ldyBEcmF3aW5nLlJlY3RQYXJhbShcclxuICAgICAgICAgICAgJ3JlY3QnLFxyXG4gICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0PT0wP3dpZHRoOmhlaWdodCxcclxuICAgICAgICAgICAgb2Zmc2V0WCxcclxuICAgICAgICAgICAgb2Zmc2V0WSxcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgYWRkU2VnZW1lbnRlZFJlY3Qod2lkdGggOiBudW1iZXIsIGhlaWdodCA6IG51bWJlciA9IDAsIG9mZnNldFggOiBudW1iZXIgPSAwLCBvZmZzZXRZIDogbnVtYmVyID0gMCwgYW5nbGUgOiBudW1iZXIgPSAwKVxyXG4gICAgOiBEcmF3aW5nXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5sYXN0QWRkZWQgPSBuZXcgRHJhd2luZy5SZWN0UGFyYW0oXHJcbiAgICAgICAgICAgICdzZWdtZW50ZWRSZWN0JyxcclxuICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodD09MD93aWR0aDpoZWlnaHQsXHJcbiAgICAgICAgICAgIG9mZnNldFgsXHJcbiAgICAgICAgICAgIG9mZnNldFksXHJcbiAgICAgICAgICAgIGFuZ2xlXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGV0IHJhZGlhbnMgPSBhbmdsZSAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgaWYod2lkdGggPiBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByYWRpYW5zICs9IE1hdGguUEkgLyAyO1xyXG4gICAgICAgICAgICBsZXQgdHdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHdpZHRoID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICBoZWlnaHQgPSB0d2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHdpZHRoIDwgMC4wMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbiA9IE1hdGguZmxvb3IoaGVpZ2h0L3dpZHRoKTtcclxuICAgICAgICBsZXQgbyA9IC13aWR0aCAqIChuLTEpLzI7XHJcbiAgICAgICAgbGV0IHZvID0gd2lkdGg7XHJcbiAgICAgICAgd2lkdGggKj0gMS4wNTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpPCBuOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnJlY3RzLnB1c2gobmV3IERyYXdpbmdSZWN0KFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xvcixcclxuICAgICAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgICAgICBNYXRoLnNpbihyYWRpYW5zKSAqIG8gKyBvZmZzZXRYLFxyXG4gICAgICAgICAgICAgICAgTWF0aC5jb3MocmFkaWFucykgKiBvICsgb2Zmc2V0WSxcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFzQ29sbGlzaW9uKSk7XHJcbiAgICAgICAgICAgIG8rPXZvO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGFkZEFyYyhhbmdsZSA6IG51bWJlciwgY291bnQgOiBudW1iZXIgPSAxKVxyXG4gICAgOiBEcmF3aW5nXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IG9mZnNldCA9IG5ldyBWZWN0b3IodGhpcy5sYXN0QWRkZWQub2Zmc2V0WCwgdGhpcy5sYXN0QWRkZWQub2Zmc2V0WSk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRBbmdsZSA9IHRoaXMubGFzdEFkZGVkLmFuZ2xlO1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y291bnQ7aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2Zmc2V0LnJvdGF0ZShhbmdsZSk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubGFzdEFkZGVkLnR5cGUgPT0gJ3JlY3QnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFJlY3QodGhpcy5sYXN0QWRkZWQud2lkdGgsIHRoaXMubGFzdEFkZGVkLmhlaWdodCwgb2Zmc2V0LngsIG9mZnNldC55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRBbmdsZSAtPSBhbmdsZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VnZW1lbnRlZFJlY3QodGhpcy5sYXN0QWRkZWQud2lkdGgsIHRoaXMubGFzdEFkZGVkLmhlaWdodCwgb2Zmc2V0LngsIG9mZnNldC55LCBjdXJyZW50QW5nbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgbWlycm9yWCgpXHJcbiAgICA6IERyYXdpbmdcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLmxhc3RBZGRlZC50eXBlID09ICdyZWN0JylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUmVjdChcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEFkZGVkLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0QWRkZWQuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgLXRoaXMubGFzdEFkZGVkLm9mZnNldFgsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RBZGRlZC5vZmZzZXRZKTtcclxuICAgICAgICB9ZWxzZVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgbWlycm9yWSgpXHJcbiAgICA6IERyYXdpbmdcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLmxhc3RBZGRlZC50eXBlID09ICdyZWN0JylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUmVjdChcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEFkZGVkLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0QWRkZWQuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0QWRkZWQub2Zmc2V0WCxcclxuICAgICAgICAgICAgICAgIC10aGlzLmxhc3RBZGRlZC5vZmZzZXRZKTtcclxuICAgICAgICB9ZWxzZVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlU3RhdGUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVjdHMuZm9yRWFjaChyZWN0ID0+IHtcclxuICAgICAgICAgICAgcmVjdC51cGRhdGVTdGF0ZSh0aGlzKTtcclxuICAgICAgICB9KTsgICAgXHJcbiAgICB9XHJcbiAgICBzZXRQb3NpdGlvbih2OlZlY3RvcilcclxuICAgIDogRHJhd2luZ1xyXG4gICAge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uc2V0KHYpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0Um90YXRpb24ocjpudW1iZXIpXHJcbiAgICA6IERyYXdpbmdcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gcjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGRyYXcoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVjdHMuZm9yRWFjaChyZWN0ID0+IHtcclxuICAgICAgICAgICAgcmVjdC5kcmF3KHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaXNPdmVybGFwcGluZyhvdGhlciA6IERyYXdpbmcpXHJcbiAgICA6IGJvb2xlYW5cclxuICAgIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKClcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMucmVjdHNbaV07XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgb3RoZXIucmVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG90aGVyUmVjdCA9IG90aGVyLnJlY3RzW2pdO1xyXG4gICAgICAgICAgICAgICAgaWYocmVjdC5pc092ZXJsYXBwaW5nKG90aGVyUmVjdCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCB7IERyYXdpbmcsIFRleHREcmF3ZXIgfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9EcmF3aW5nLnRzIl0sIm1hcHBpbmdzIjoiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBaUJBO0FBZEE7QUFDQTtBQVlBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQWxIQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1R0E7QUFBQTtBQXFOQTtBQXBOQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFnS0E7QUE5SkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBT0E7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBU0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBS0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUtBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2S0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBc0tBO0FBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!**********************!*\
  !*** ./src/Actor.ts ***!
  \**********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Color_1 = __webpack_require__(/*! ./Color */ 1);\r\nvar Game_1 = __webpack_require__(/*! ./Game */ 2);\r\nvar Drawing_1 = __webpack_require__(/*! ./Drawing */ 5);\r\nvar Vector_1 = __webpack_require__(/*! ./Vector */ 0);\r\nvar ActorGroup = /** @class */ (function () {\r\n    function ActorGroup(name) {\r\n        this.displayPriority = 1;\r\n        this.name = name;\r\n        this.clear();\r\n    }\r\n    ActorGroup.prototype.clear = function () {\r\n        this.members = [];\r\n    };\r\n    ActorGroup.prototype.update = function () {\r\n        var i = 0;\r\n        while (true) {\r\n            if (i >= this.members.length) {\r\n                break;\r\n            }\r\n            var a = this.members[i];\r\n            if (!a.isDestroying) {\r\n                a.update();\r\n                a.lateUpdate();\r\n                i++;\r\n            }\r\n            else {\r\n                this.members.splice(i, 1);\r\n            }\r\n        }\r\n    };\r\n    return ActorGroup;\r\n}());\r\nvar Actor = /** @class */ (function () {\r\n    function Actor() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this.velocity = new Vector_1.Vector(0, 0);\r\n        this.rotation = 0;\r\n        this.isDestroying = false;\r\n        this.age = 0;\r\n        this.drawing = new Drawing_1.Drawing();\r\n        this.position = new Vector_1.Vector(0, 0);\r\n        this.scale = new Vector_1.Vector(1, 1);\r\n        var className = this.constructor['name'];\r\n        var group;\r\n        for (var i = 0; i < Actor.groups.length; i++) {\r\n            var g = Actor.groups[i];\r\n            if (g.name == className) {\r\n                group = g;\r\n                break;\r\n            }\r\n        }\r\n        if (!group) {\r\n            group = new ActorGroup(className);\r\n            Actor.groups.push(group);\r\n            // Actor.sortGroups();\r\n            // this.initialize()\r\n        }\r\n        group.members.push(this);\r\n        this.group = group;\r\n        this.begin.apply(this, args);\r\n        // after begin, force an update of the drawing state, so we don't get bad collisions on the first frame\r\n        this.drawing.position.set(this.position.x, this.position.y);\r\n        this.drawing.updateState();\r\n    }\r\n    Actor.prototype.initialize = function () {\r\n    };\r\n    Actor.prototype.destroy = function () {\r\n        this.isDestroying = true;\r\n    };\r\n    Actor.prototype.begin = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n    };\r\n    Actor.prototype.update = function () {\r\n    };\r\n    Actor.prototype.setPosition = function (p) {\r\n        this.position.set(p.x, p.y);\r\n        return this;\r\n    };\r\n    Actor.prototype.setVelocity = function (velocity) {\r\n        this.velocity.set(velocity.x, velocity.y);\r\n        return this;\r\n    };\r\n    Actor.prototype.lateUpdate = function () {\r\n        this.position.add(this.velocity);\r\n        this.drawing.rotation = this.rotation;\r\n        this.drawing.position.set(this.position.x, this.position.y);\r\n        this.drawing.draw();\r\n        this.age++;\r\n    };\r\n    Actor.prototype.checkOverlap = function (targetClass, handler) {\r\n        var _this = this;\r\n        var res = false;\r\n        var checkActors = Actor.getGroup(targetClass);\r\n        checkActors.forEach(function (a) {\r\n            if (a.drawing.isOverlapping(_this.drawing)) {\r\n                res = true;\r\n                if (handler) {\r\n                    handler(a);\r\n                }\r\n            }\r\n        });\r\n        return res;\r\n    };\r\n    Actor.update = function () {\r\n        Actor.groups.forEach(function (group) {\r\n            group.update();\r\n        });\r\n    };\r\n    Actor.clear = function () {\r\n        Actor.groups.forEach(function (group) {\r\n            group.clear();\r\n        });\r\n    };\r\n    Actor.getGroup = function (targetClass) {\r\n        var classname = targetClass[\"name\"];\r\n        for (var i = 0; i < Actor.groups.length; i++) {\r\n            var g = Actor.groups[i];\r\n            if (g.name == classname) {\r\n                return g.members;\r\n            }\r\n        }\r\n        return [];\r\n    };\r\n    Actor.prototype.setDisplayPriority = function (displayPriority) {\r\n        this.group.displayPriority = displayPriority;\r\n        Actor.sortGroups();\r\n        return this;\r\n    };\r\n    Actor.sortGroups = function () {\r\n        Actor.groups.sort(function (a, b) {\r\n            return a.displayPriority - b.displayPriority;\r\n        });\r\n    };\r\n    Actor.groups = [];\r\n    return Actor;\r\n}());\r\nexports.Actor = Actor;\r\nvar TextActor = /** @class */ (function (_super) {\r\n    __extends(TextActor, _super);\r\n    function TextActor(s) {\r\n        var _this = _super.call(this) || this;\r\n        _this.displayString = s;\r\n        return _this;\r\n    }\r\n    TextActor.prototype.begin = function () {\r\n        this.setDisplayPriority(2);\r\n        this.duration = 1;\r\n        this.scale.set(1, 1);\r\n        this.xAlign = 0;\r\n        this.color = Color_1.Color.white;\r\n    };\r\n    TextActor.prototype.setDurationForever = function () {\r\n        this.duration = 999999;\r\n        return this;\r\n    };\r\n    TextActor.prototype.update = function () {\r\n        Game_1.Game.display.drawText(this.displayString, this.position.x, this.position.y, 0, this.xAlign, this.color, this.scale.x);\r\n        this.position.add(this.velocity);\r\n        if (this.age > this.duration) {\r\n            this.destroy();\r\n        }\r\n    };\r\n    TextActor.prototype.setDuration = function (duration) {\r\n        this.duration = duration;\r\n        return this;\r\n    };\r\n    TextActor.prototype.setVelocity = function (velocity) {\r\n        _super.prototype.setVelocity.call(this, velocity);\r\n        return this;\r\n    };\r\n    TextActor.prototype.setPosition = function (p) {\r\n        _super.prototype.setPosition.call(this, p);\r\n        return this;\r\n    };\r\n    return TextActor;\r\n}(Actor));\r\nexports.TextActor = TextActor;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9BY3Rvci50cz8zNmY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vQ29sb3JcIjtcclxuaW1wb3J0IHsgR2FtZSB9IGZyb20gXCIuL0dhbWVcIjtcclxuaW1wb3J0IHsgRHJhd2luZyB9IGZyb20gXCIuL0RyYXdpbmdcIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vVmVjdG9yXCI7XHJcbmNsYXNzIEFjdG9yR3JvdXBcclxue1xyXG4gICAgbmFtZSA6IHN0cmluZztcclxuICAgIG1lbWJlcnMgOiBBY3RvcltdO1xyXG4gICAgZGlzcGxheVByaW9yaXR5OiBudW1iZXIgPSAxO1xyXG4gICAgY29uc3RydWN0b3IobmFtZSA6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIGNsZWFyKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLm1lbWJlcnMgPSBbXTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIHdoaWxlKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihpPj10aGlzLm1lbWJlcnMubGVuZ3RoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgYSA9IHRoaXMubWVtYmVyc1tpXTtcclxuICAgICAgICAgICAgaWYoIWEuaXNEZXN0cm95aW5nKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhLnVwZGF0ZSgpXHJcbiAgICAgICAgICAgICAgICBhLmxhdGVVcGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZW1iZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jbGFzcyBBY3RvclxyXG57XHJcbiAgICBwcml2YXRlIHN0YXRpYyBncm91cHMgOiBBY3Rvckdyb3VwW10gPSBbXTtcclxuICAgIHBvc2l0aW9uIDogVmVjdG9yO1xyXG4gICAgdmVsb2NpdHkgOiBWZWN0b3IgPSBuZXcgVmVjdG9yKDAsMCk7XHJcbiAgICByb3RhdGlvbiA6IG51bWJlciA9IDA7XHJcbiAgICBzY2FsZSA6IFZlY3RvcjtcclxuICAgIGRyYXdpbmcgOiBEcmF3aW5nO1xyXG4gICAgaXNEZXN0cm95aW5nIDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgYWdlIDogbnVtYmVyID0gMDtcclxuICAgIGdyb3VwIDogQWN0b3JHcm91cDtcclxuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZHJhd2luZyA9IG5ldyBEcmF3aW5nKCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWN0b3IoMCwwKTtcclxuICAgICAgICB0aGlzLnNjYWxlID0gbmV3IFZlY3RvcigxLDEpO1xyXG4gICAgICAgIGxldCBjbGFzc05hbWUgPSB0aGlzLmNvbnN0cnVjdG9yWyduYW1lJ107XHJcbiAgICAgICAgbGV0IGdyb3VwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQWN0b3IuZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGcgPSBBY3Rvci5ncm91cHNbaV07XHJcbiAgICAgICAgICAgIGlmKGcubmFtZSA9PSBjbGFzc05hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFncm91cClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdyb3VwID0gbmV3IEFjdG9yR3JvdXAoY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgQWN0b3IuZ3JvdXBzLnB1c2goZ3JvdXApO1xyXG4gICAgICAgICAgICAvLyBBY3Rvci5zb3J0R3JvdXBzKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuaW5pdGlhbGl6ZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdyb3VwLm1lbWJlcnMucHVzaCh0aGlzKTtcclxuICAgICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XHJcbiAgICAgICAgdGhpcy5iZWdpbiguLi5hcmdzKVxyXG4gICAgICAgIC8vIGFmdGVyIGJlZ2luLCBmb3JjZSBhbiB1cGRhdGUgb2YgdGhlIGRyYXdpbmcgc3RhdGUsIHNvIHdlIGRvbid0IGdldCBiYWQgY29sbGlzaW9ucyBvbiB0aGUgZmlyc3QgZnJhbWVcclxuICAgICAgICB0aGlzLmRyYXdpbmcucG9zaXRpb24uc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcclxuICAgICAgICB0aGlzLmRyYXdpbmcudXBkYXRlU3RhdGUoKTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG5cclxuICAgIH1cclxuICAgIGRlc3Ryb3koKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaXNEZXN0cm95aW5nID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGJlZ2luKC4uLmFyZ3M6IGFueVtdKVxyXG4gICAge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgdXBkYXRlKClcclxuICAgIHtcclxuXHJcbiAgICB9XHJcbiAgICBzZXRQb3NpdGlvbihwIDogVmVjdG9yKVxyXG4gICAgOiBBY3RvclxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uc2V0KHAueCwgcC55KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFZlbG9jaXR5KHZlbG9jaXR5IDogVmVjdG9yKVxyXG4gICAgOiBBY3RvclxyXG4gICAge1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkuc2V0KHZlbG9jaXR5LngsIHZlbG9jaXR5LnkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgbGF0ZVVwZGF0ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5hZGQodGhpcy52ZWxvY2l0eSk7XHJcbiAgICAgICAgdGhpcy5kcmF3aW5nLnJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbjtcclxuICAgICAgICB0aGlzLmRyYXdpbmcucG9zaXRpb24uc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcclxuICAgICAgICB0aGlzLmRyYXdpbmcuZHJhdygpO1xyXG4gICAgICAgIHRoaXMuYWdlKys7XHJcbiAgICB9XHJcbiAgICBjaGVja092ZXJsYXAodGFyZ2V0Q2xhc3MsIGhhbmRsZXI/OkZ1bmN0aW9uKVxyXG4gICAgOiBib29sZWFuXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlcyA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBjaGVja0FjdG9ycyA6IEFjdG9yW10gPSBBY3Rvci5nZXRHcm91cCh0YXJnZXRDbGFzcyk7XHJcbiAgICAgICAgY2hlY2tBY3RvcnMuZm9yRWFjaChhID0+IHtcclxuICAgICAgICAgICAgaWYoYS5kcmF3aW5nLmlzT3ZlcmxhcHBpbmcodGhpcy5kcmF3aW5nKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmKGhhbmRsZXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcihhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgdXBkYXRlKClcclxuICAgIHtcclxuICAgICAgICBBY3Rvci5ncm91cHMuZm9yRWFjaChncm91cCA9PiB7XHJcbiAgICAgICAgICAgIGdyb3VwLnVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNsZWFyKClcclxuICAgIHtcclxuICAgICAgICBBY3Rvci5ncm91cHMuZm9yRWFjaChncm91cCA9PiB7XHJcbiAgICAgICAgICAgIGdyb3VwLmNsZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0R3JvdXAodGFyZ2V0Q2xhc3MpXHJcbiAgICA6IEFjdG9yW11cclxuICAgIHtcclxuICAgICAgICBsZXQgY2xhc3NuYW1lIDogc3RyaW5nID0gdGFyZ2V0Q2xhc3NbXCJuYW1lXCJdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQWN0b3IuZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGcgPSBBY3Rvci5ncm91cHNbaV07XHJcbiAgICAgICAgICAgIGlmKGcubmFtZSA9PSBjbGFzc25hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnLm1lbWJlcnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgc2V0RGlzcGxheVByaW9yaXR5KGRpc3BsYXlQcmlvcml0eTpudW1iZXIpXHJcbiAgICA6IEFjdG9yXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5ncm91cC5kaXNwbGF5UHJpb3JpdHkgPSBkaXNwbGF5UHJpb3JpdHk7XHJcbiAgICAgICAgQWN0b3Iuc29ydEdyb3VwcygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNvcnRHcm91cHMoKVxyXG4gICAge1xyXG4gICAgICAgIEFjdG9yLmdyb3Vwcy5zb3J0KChhLCBiKT0+e1xyXG4gICAgICAgICAgICByZXR1cm4gYS5kaXNwbGF5UHJpb3JpdHkgLSBiLmRpc3BsYXlQcmlvcml0eTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBUZXh0QWN0b3IgZXh0ZW5kcyBBY3RvclxyXG57XHJcbiAgICBkdXJhdGlvbiA6IG51bWJlcjtcclxuICAgIHhBbGlnbiA6IG51bWJlcjtcclxuICAgIGRpc3BsYXlTdHJpbmcgOiBzdHJpbmc7XHJcbiAgICBjb2xvciA6IENvbG9yO1xyXG4gICAgY29uc3RydWN0b3IocyA6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVN0cmluZyA9IHM7XHJcbiAgICB9XHJcbiAgICBiZWdpbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5zZXREaXNwbGF5UHJpb3JpdHkoMik7XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IDE7XHJcbiAgICAgICAgdGhpcy5zY2FsZS5zZXQoMSwxKTtcclxuICAgICAgICB0aGlzLnhBbGlnbiA9IDA7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IENvbG9yLndoaXRlO1xyXG4gICAgfVxyXG4gICAgc2V0RHVyYXRpb25Gb3JldmVyKClcclxuICAgIDogVGV4dEFjdG9yXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IDk5OTk5OTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHVwZGF0ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgR2FtZS5kaXNwbGF5LmRyYXdUZXh0KHRoaXMuZGlzcGxheVN0cmluZywgdGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIDAsIHRoaXMueEFsaWduLCB0aGlzLmNvbG9yLCB0aGlzLnNjYWxlLngpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uYWRkKHRoaXMudmVsb2NpdHkpO1xyXG4gICAgICAgIGlmKHRoaXMuYWdlPnRoaXMuZHVyYXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICB9ICAgXHJcbiAgICBzZXREdXJhdGlvbihkdXJhdGlvbjpudW1iZXIpXHJcbiAgICA6IFRleHRBY3RvclxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFZlbG9jaXR5KHZlbG9jaXR5IDogVmVjdG9yKVxyXG4gICAgOiBUZXh0QWN0b3JcclxuICAgIHtcclxuICAgICAgICBzdXBlci5zZXRWZWxvY2l0eSh2ZWxvY2l0eSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRQb3NpdGlvbihwIDogVmVjdG9yKVxyXG4gICAgOiBUZXh0QWN0b3JcclxuICAgIHtcclxuICAgICAgICBzdXBlci5zZXRQb3NpdGlvbihwKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG5leHBvcnQgeyBBY3RvciwgVGV4dEFjdG9yIH07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0FjdG9yLnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFXQTtBQUFBO0FBQUE7QUFBQTs7QUFQQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFoSUE7QUFpSUE7QUFBQTtBQXNEQTtBQXJEQTtBQUFBO0FBTUE7QUFBQTtBQUdBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!**********************!*\
  !*** ./src/Mouse.ts ***!
  \**********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Vector_1 = __webpack_require__(/*! ./Vector */ 0);\r\nvar Display_1 = __webpack_require__(/*! ./Display */ 3);\r\nvar Mouse = /** @class */ (function () {\r\n    function Mouse() {\r\n    }\r\n    Mouse.initialize = function () {\r\n        Mouse.position = new Vector_1.Vector(0.5, 0.5);\r\n        Display_1.Display.element.addEventListener('mousedown', Mouse.onMouseDown);\r\n        Display_1.Display.element.addEventListener('mouseup', Mouse.onMouseUp);\r\n        Display_1.Display.element.addEventListener('mousemove', Mouse.onMouseMove);\r\n    };\r\n    Mouse.onMouseUp = function (e) {\r\n        Mouse.isPressed = false;\r\n    };\r\n    Mouse.onMouseDown = function (e) {\r\n        Mouse.isPressed = true;\r\n        Mouse.onMouseMove(e);\r\n    };\r\n    Mouse.onMouseMove = function (e) {\r\n        e.preventDefault();\r\n        //@wasMoving = true\r\n        var rect = e.target.getBoundingClientRect();\r\n        Mouse.position.x = ((e.pageX - rect.left) / Display_1.Display.size.x);\r\n        Mouse.position.y = ((e.pageY - rect.top) / Display_1.Display.size.y);\r\n    };\r\n    return Mouse;\r\n}());\r\nexports.Mouse = Mouse;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9Nb3VzZS50cz80M2IxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuL1ZlY3RvclwiO1xyXG5pbXBvcnQgeyBEaXNwbGF5IH0gZnJvbSBcIi4vRGlzcGxheVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vdXNlXHJcbntcclxuICAgIHN0YXRpYyBwb3NpdGlvbiA6IFZlY3RvcjtcclxuICAgIHN0YXRpYyBpc1ByZXNzZWQgOiBib29sZWFuO1xyXG5cclxuICAgIHN0YXRpYyBpbml0aWFsaXplKClcclxuICAgIHtcclxuICAgICAgICBNb3VzZS5wb3NpdGlvbiA9IG5ldyBWZWN0b3IoMC41LCAwLjUpO1xyXG4gICAgICAgIERpc3BsYXkuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBNb3VzZS5vbk1vdXNlRG93bik7XHJcbiAgICAgICAgRGlzcGxheS5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBNb3VzZS5vbk1vdXNlVXApO1xyXG4gICAgICAgIERpc3BsYXkuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBNb3VzZS5vbk1vdXNlTW92ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgb25Nb3VzZVVwKGUpXHJcbiAgICB7XHJcbiAgICAgICAgTW91c2UuaXNQcmVzc2VkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgb25Nb3VzZURvd24oZSlcclxuICAgIHtcclxuICAgICAgICBNb3VzZS5pc1ByZXNzZWQgPSB0cnVlO1xyXG4gICAgICAgIE1vdXNlLm9uTW91c2VNb3ZlKGUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIG9uTW91c2VNb3ZlKGUpXHJcbiAgICB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgLy9Ad2FzTW92aW5nID0gdHJ1ZVxyXG4gICAgICAgIGxldCByZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuICAgICAgICBNb3VzZS5wb3NpdGlvbi54ID0gKChlLnBhZ2VYIC0gcmVjdC5sZWZ0KSAvIERpc3BsYXkuc2l6ZS54KVxyXG4gICAgICAgIE1vdXNlLnBvc2l0aW9uLnkgPSAoKGUucGFnZVkgLSByZWN0LnRvcCkgLyBEaXNwbGF5LnNpemUueSlcclxuICAgIH1cclxuICAgIC8qXHJcbkBvbk1vdXNlRG93bjogKGUpID0+XHJcbiAgICBAaXAgPSB0cnVlXHJcbiAgICBAb25Nb3VzZU1vdmUgZVxyXG4gICAgRy5vbmZvY3VzKClcclxuQG9uTW91c2VVcDogKGUpID0+XHJcbkBpcCA9IGZhbHNlXHJcbiovXHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvTW91c2UudHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFxQ0E7QUFoQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQUE7QUFyQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/*!***************************!*\
  !*** ./src/Extensions.ts ***!
  \***************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("Number.prototype.clamp = function (min, max) {\r\n    if (min === void 0) { min = 0; }\r\n    if (max === void 0) { max = 1; }\r\n    if (this < min) {\r\n        return min;\r\n    }\r\n    else if (this > max) {\r\n        return max;\r\n    }\r\n    return this;\r\n};\r\nNumber.prototype.loopRange = function (min, max) {\r\n    if (min === void 0) { min = 0; }\r\n    if (max === void 0) { max = 1; }\r\n    var delta = max - min;\r\n    var t = this;\r\n    t -= min;\r\n    if (t >= 0) {\r\n        return t % delta + min;\r\n    }\r\n    return delta + t % delta + min;\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9FeHRlbnNpb25zLnRzP2ZlMGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIE51bWJlciB7XHJcbiAgICBjbGFtcDogKG1pbj86bnVtYmVyLCBtYXg/Om51bWJlcik9Pm51bWJlcjtcclxuICAgIGxvb3BSYW5nZTogKG1pbj86bnVtYmVyLCBtYXg/Om51bWJlcik9Pm51bWJlcjtcclxuICAgIEVQU0lMT046bnVtYmVyO1xyXG59XHJcbk51bWJlci5wcm90b3R5cGUuY2xhbXAgPSBmdW5jdGlvbihtaW4gOiBudW1iZXIgPSAwLCBtYXggOiBudW1iZXIgPSAxKVxyXG46IG51bWJlciB7XHJcbiAgICBpZih0aGlzIDwgbWluKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBtaW47XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMgPiBtYXgpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG1heDtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59XHJcbk51bWJlci5wcm90b3R5cGUubG9vcFJhbmdlID0gZnVuY3Rpb24obWluOm51bWJlciA9IDAsIG1heCA6IG51bWJlciA9IDEpXHJcbjogbnVtYmVyXHJcbntcclxuICAgIGxldCBkZWx0YSA9IG1heC1taW47XHJcbiAgICBsZXQgdCA9IHRoaXM7XHJcbiAgICB0LT1taW47XHJcbiAgICBpZih0Pj0wKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0JWRlbHRhK21pbjtcclxuICAgIH1cclxuICAgIHJldHVybiBkZWx0YSArIHQgJSBkZWx0YSArIG1pbjtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9FeHRlbnNpb25zLnRzIl0sIm1hcHBpbmdzIjoiQUFLQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/*!***********************!*\
  !*** ./src/Random.ts ***!
  \***********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Random = /** @class */ (function () {\r\n    function Random() {\r\n    }\r\n    Random.range = function (low, high) {\r\n        if (low === void 0) { low = 0; }\r\n        if (high === void 0) { high = 1; }\r\n        return Math.random() * (high - low) + low;\r\n    };\r\n    Random.rangeInt = function (low, high) {\r\n        if (low === void 0) { low = 0; }\r\n        if (high === void 0) { high = 1; }\r\n        return Math.floor(Random.range(low, high + 1));\r\n    };\r\n    return Random;\r\n}());\r\nexports.Random = Random;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9SYW5kb20udHM/OGE4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBSYW5kb21cclxue1xyXG4gICAgc3RhdGljIHJhbmdlKGxvdzpudW1iZXI9MCwgaGlnaDpudW1iZXI9MSlcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSooaGlnaC1sb3cpK2xvdztcclxuICAgIH1cclxuICAgIHN0YXRpYyByYW5nZUludChsb3c6bnVtYmVyPTAsIGhpZ2g6bnVtYmVyPTEpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoUmFuZG9tLnJhbmdlKGxvdywgaGlnaCsxKSlcclxuICAgIH1cclxufVxyXG5leHBvcnR7IFJhbmRvbSB9XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1JhbmRvbS50cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUFBO0FBVUE7QUFSQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/*!**************************!*\
  !*** ./src/WormDrive.ts ***!
  \**************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Mglue_1 = __webpack_require__(/*! ./Mglue */ 11);\r\nvar g;\r\nvar WormDriveGame = /** @class */ (function (_super) {\r\n    __extends(WormDriveGame, _super);\r\n    function WormDriveGame() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    WormDriveGame.prototype.onBeginGame = function () {\r\n        var p = new Player();\r\n        var a = new Apple();\r\n        var i = new InstructionText(\"OVERLAP SAFE\");\r\n    };\r\n    return WormDriveGame;\r\n}(Mglue_1.Game));\r\nvar InstructionText = /** @class */ (function (_super) {\r\n    __extends(InstructionText, _super);\r\n    function InstructionText() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    InstructionText.prototype.begin = function () {\r\n        this.setDisplayPriority(-1);\r\n        this.setDurationForever();\r\n        this.xAlign = 0;\r\n        this.setPosition(new Mglue_1.Vector(0.5, 0.5));\r\n        this.scale.x = 2;\r\n        this.color = Mglue_1.Color.darkgreen;\r\n    };\r\n    return InstructionText;\r\n}(Mglue_1.TextActor));\r\nvar Apple = /** @class */ (function (_super) {\r\n    __extends(Apple, _super);\r\n    function Apple() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Apple.prototype.begin = function () {\r\n        this.position.set(0.25, 0.25);\r\n        this.drawing\r\n            .setColor(Mglue_1.Color.red)\r\n            .addRect(0.02, 0.02, 0.02)\r\n            .addArc(60, 6);\r\n    };\r\n    Apple.prototype.chooseNewPosition = function () {\r\n        this.position.set(Mglue_1.Random.range(0.1, 0.9), Mglue_1.Random.range(0.1, 0.9));\r\n    };\r\n    return Apple;\r\n}(Mglue_1.Actor));\r\nvar BodySegment = /** @class */ (function (_super) {\r\n    __extends(BodySegment, _super);\r\n    function BodySegment() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    BodySegment.prototype.begin = function (dangerSeg) {\r\n        var color = dangerSeg ? Mglue_1.Color.lightgreen : Mglue_1.Color.darkgreen;\r\n        this.drawing.hasCollision = dangerSeg;\r\n        this.drawing\r\n            .setColor(color)\r\n            .addRect(0.02, 0.02);\r\n    };\r\n    return BodySegment;\r\n}(Mglue_1.Actor));\r\n// line intersection\r\nfunction turn(p1, p2, p3) {\r\n    var epsilon = Math.pow(2, -52);\r\n    var a = p1.x;\r\n    var b = p1.y;\r\n    var c = p2.x;\r\n    var d = p2.y;\r\n    var e = p3.x;\r\n    var f = p3.y;\r\n    var A = (f - b) * (c - a);\r\n    var B = (d - b) * (e - a);\r\n    return (A > B + epsilon) ? 1 : (A + epsilon < B) ? -1 : 0;\r\n}\r\nfunction lineIntersecting(p1, p2, p3, p4) {\r\n    return (turn(p1, p3, p4) != turn(p2, p3, p4)) && (turn(p1, p2, p3) != turn(p1, p2, p4));\r\n}\r\nvar Player = /** @class */ (function (_super) {\r\n    __extends(Player, _super);\r\n    function Player() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.turnSpeed = 5;\r\n        _this.bodySegments = [];\r\n        _this.spawnRemaining = 0;\r\n        _this.moveSpeed = 0.005;\r\n        _this.intersections = [];\r\n        return _this;\r\n    }\r\n    Player.prototype.begin = function () {\r\n        this.position.set(0.5, 0.5);\r\n        this.drawing\r\n            .setColor(Mglue_1.Color.lightblue)\r\n            .addRect(0.02, 0.02, 0.01)\r\n            .addArc(60, 6)\r\n            .setColor(Mglue_1.Color.darkgray)\r\n            .addRect(0.01, 0.01, 0.015, 0)\r\n            .mirrorX();\r\n        this.overlapDrawing = new Mglue_1.Drawing();\r\n        this.overlapDrawing\r\n            .setColor(Mglue_1.Color.red)\r\n            .addRect(0.01, 0.01, 0.04)\r\n            .addArc(20, 18);\r\n    };\r\n    Player.prototype.getSpawnPosition = function () {\r\n        if (this.bodySegments.length == 0) {\r\n            return this.position;\r\n        }\r\n        return this.bodySegments[this.bodySegments.length - 1].position;\r\n    };\r\n    Player.prototype.update = function () {\r\n        if (this.spawnRemaining > 0 && this.age % 20 == 0) {\r\n            this.spawnRemaining--;\r\n            var dangerSeg = Math.floor(this.bodySegments.length / 8) % 2 == 1;\r\n            var newSeg = new BodySegment(dangerSeg);\r\n            newSeg.setPosition(this.spawnPosition);\r\n            this.bodySegments.push(newSeg);\r\n        }\r\n        // update all the body segment positions\r\n        for (var i = this.bodySegments.length - 1; i >= 0; i--) {\r\n            var moveTarget = this.position;\r\n            var cSeg = this.bodySegments[i];\r\n            if (i > 0) {\r\n                moveTarget = this.bodySegments[i - 1].position;\r\n            }\r\n            var direction = cSeg.position.directionTo(moveTarget);\r\n            var distance = Mglue_1.Vector.distance(cSeg.position, moveTarget);\r\n            cSeg.position.addDirection(direction, distance * 0.05);\r\n        }\r\n        // see how many line segments overlap\r\n        var overlapCount = 0;\r\n        this.intersections = [];\r\n        for (var i = 0; i < this.bodySegments.length - 1; i++) {\r\n            var a = this.bodySegments[i].position;\r\n            var b = this.bodySegments[i + 1].position;\r\n            for (var j = i; j < this.bodySegments.length - 1; j++) {\r\n                if (Math.abs(i - j) < 4) {\r\n                    continue;\r\n                }\r\n                var c = this.bodySegments[j].position;\r\n                var d = this.bodySegments[j + 1].position;\r\n                if (lineIntersecting(a, b, c, d)) {\r\n                    overlapCount++;\r\n                    var intersection = new Mglue_1.Vector(a.x, a.y).add(b).add(c).add(d).divide(4);\r\n                    this.intersections.push(intersection);\r\n                    this.overlapDrawing\r\n                        .setRotation(this.age)\r\n                        .setPosition(intersection)\r\n                        .draw();\r\n                }\r\n            }\r\n        }\r\n        if (Mglue_1.Keyboard.keyDown[Mglue_1.Keyboard.LEFT]) {\r\n            this.rotation -= this.turnSpeed;\r\n        }\r\n        if (Mglue_1.Keyboard.keyDown[Mglue_1.Keyboard.RIGHT]) {\r\n            this.rotation += this.turnSpeed;\r\n        }\r\n        var v = new Mglue_1.Vector(0, 0).addDirection(this.rotation, 1);\r\n        if (this.position.x > 1 || this.position.x < 0) {\r\n            v.x *= -1;\r\n        }\r\n        if (this.position.y > 1 || this.position.y < 0) {\r\n            v.y *= -1;\r\n        }\r\n        this.rotation = v.rotation();\r\n        this.position.addDirection(this.rotation, this.moveSpeed);\r\n        // check to see if we are eating an apple\r\n        if (this.checkOverlap(Apple, function (a) {\r\n            a.chooseNewPosition();\r\n        })) {\r\n            // add score\r\n            this.intersections.forEach(function (intersection) {\r\n                new Mglue_1.TextActor(\"+1\").setPosition(intersection).setDuration(30).setVelocity(new Mglue_1.Vector(0, -0.001));\r\n                g.score += 1;\r\n            });\r\n            // start spawning body segments\r\n            this.spawnRemaining = 8;\r\n            this.spawnPosition = new Mglue_1.Vector(this.getSpawnPosition().x, this.getSpawnPosition().y);\r\n        }\r\n        if (!g.gameOver && this.checkOverlap(BodySegment)) {\r\n            this.destroy();\r\n            var ps = new Mglue_1.ParticleSystem();\r\n            ps.position.set(this.position.x, this.position.y);\r\n            ps.count = 10;\r\n            ps.color = Mglue_1.Color.blue;\r\n            g.endGame();\r\n        }\r\n    };\r\n    return Player;\r\n}(Mglue_1.Actor));\r\nwindow.onload = function () {\r\n    console.log(\"window loading\");\r\n    Mglue_1.Config.title = \"WORM DRIVE\";\r\n    g = new WormDriveGame();\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvV29ybURyaXZlLnRzPzI4ZGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHJhd2luZywgUGFydGljbGVTeXN0ZW0sIFRleHRBY3RvciwgQ29uZmlnLCBDb2xvciwgS2V5Ym9hcmQsIFZlY3RvciwgUmFuZG9tLCBBY3RvciwgR2FtZSB9IGZyb20gXCIuL01nbHVlXCI7XHJcbnZhciBnIDogV29ybURyaXZlR2FtZTtcclxuY2xhc3MgV29ybURyaXZlR2FtZSBleHRlbmRzIEdhbWVcclxue1xyXG4gICAgb25CZWdpbkdhbWUoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBwID0gbmV3IFBsYXllcigpO1xyXG4gICAgICAgIGxldCBhID0gbmV3IEFwcGxlKCk7XHJcbiAgICAgICAgbGV0IGkgPSBuZXcgSW5zdHJ1Y3Rpb25UZXh0KFwiT1ZFUkxBUCBTQUZFXCIpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEluc3RydWN0aW9uVGV4dCBleHRlbmRzIFRleHRBY3RvclxyXG57XHJcbiAgICBiZWdpbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5zZXREaXNwbGF5UHJpb3JpdHkoLTEpO1xyXG4gICAgICAgIHRoaXMuc2V0RHVyYXRpb25Gb3JldmVyKCk7XHJcbiAgICAgICAgdGhpcy54QWxpZ24gPSAwO1xyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24obmV3IFZlY3RvcigwLjUsIDAuNSkpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUueCA9IDI7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IENvbG9yLmRhcmtncmVlbjtcclxuICAgIH1cclxufVxyXG5jbGFzcyBBcHBsZSBleHRlbmRzIEFjdG9yXHJcbntcclxuICAgIGJlZ2luKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnNldCgwLjI1LCAwLjI1KVxyXG4gICAgICAgIHRoaXMuZHJhd2luZ1xyXG4gICAgICAgICAgICAuc2V0Q29sb3IoQ29sb3IucmVkKVxyXG4gICAgICAgICAgICAuYWRkUmVjdCgwLjAyLCAwLjAyLCAwLjAyKVxyXG4gICAgICAgICAgICAuYWRkQXJjKDYwLDYpXHJcbiAgICB9XHJcbiAgICBjaG9vc2VOZXdQb3NpdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5zZXQoUmFuZG9tLnJhbmdlKDAuMSwwLjkpLCBSYW5kb20ucmFuZ2UoMC4xLDAuOSkpXHJcbiAgICB9XHJcbn1cclxuY2xhc3MgQm9keVNlZ21lbnQgZXh0ZW5kcyBBY3RvclxyXG57XHJcbiAgICBiZWdpbihkYW5nZXJTZWcgOiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBjb2xvciA9IGRhbmdlclNlZz9Db2xvci5saWdodGdyZWVuOkNvbG9yLmRhcmtncmVlbjtcclxuICAgICAgICB0aGlzLmRyYXdpbmcuaGFzQ29sbGlzaW9uID0gZGFuZ2VyU2VnO1xyXG4gICAgICAgIHRoaXMuZHJhd2luZ1xyXG4gICAgICAgICAgICAuc2V0Q29sb3IoY29sb3IpXHJcbiAgICAgICAgICAgIC5hZGRSZWN0KDAuMDIsIDAuMDIpXHJcbiAgICB9XHJcbn1cclxuLy8gbGluZSBpbnRlcnNlY3Rpb25cclxuZnVuY3Rpb24gdHVybihwMTpWZWN0b3IsIHAyOlZlY3RvciwgcDM6VmVjdG9yKTpudW1iZXJcclxue1xyXG4gICAgbGV0IGVwc2lsb24gPSBNYXRoLnBvdygyLCAtNTIpO1xyXG4gICAgbGV0IGEgPSBwMS54OyBsZXQgYiA9IHAxLnk7IFxyXG4gICAgbGV0IGMgPSBwMi54OyBsZXQgZCA9IHAyLnk7XHJcbiAgICBsZXQgZSA9IHAzLng7IGxldCBmID0gcDMueTtcclxuICAgIGxldCBBID0gKGYgLSBiKSAqIChjIC0gYSk7XHJcbiAgICBsZXQgQiA9IChkIC0gYikgKiAoZSAtIGEpO1xyXG4gICAgcmV0dXJuIChBID4gQiArIGVwc2lsb24pID8gMSA6IChBICsgZXBzaWxvbiA8IEIpID8gLTEgOiAwOyAgIFxyXG59XHJcbmZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RpbmcocDE6VmVjdG9yLCBwMjpWZWN0b3IsIHAzOlZlY3RvciwgcDQ6VmVjdG9yKVxyXG46Ym9vbGVhblxyXG57XHJcbiAgICByZXR1cm4gKHR1cm4ocDEsIHAzLCBwNCkgIT0gdHVybihwMiwgcDMsIHA0KSkgJiYgKHR1cm4ocDEsIHAyLCBwMykgIT0gdHVybihwMSwgcDIsIHA0KSk7XHJcbn1cclxuY2xhc3MgUGxheWVyIGV4dGVuZHMgQWN0b3Jcclxue1xyXG4gICAgdHVyblNwZWVkOm51bWJlciA9IDU7XHJcbiAgICBib2R5U2VnbWVudHM6Qm9keVNlZ21lbnRbXSA9IFtdXHJcbiAgICBzcGF3blJlbWFpbmluZzpudW1iZXIgPSAwO1xyXG4gICAgbW92ZVNwZWVkOm51bWJlciA9IDAuMDA1O1xyXG4gICAgc3Bhd25Qb3NpdGlvbiA6IFZlY3RvcjtcclxuICAgIG92ZXJsYXBEcmF3aW5nIDogRHJhd2luZztcclxuICAgIGludGVyc2VjdGlvbnM6IFZlY3RvcltdID0gW107XHJcbiAgICBiZWdpbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5zZXQoMC41LDAuNSk7XHJcbiAgICAgICAgdGhpcy5kcmF3aW5nXHJcbiAgICAgICAgICAgIC5zZXRDb2xvcihDb2xvci5saWdodGJsdWUpXHJcbiAgICAgICAgICAgIC5hZGRSZWN0KDAuMDIsIDAuMDIsIDAuMDEpXHJcbiAgICAgICAgICAgIC5hZGRBcmMoNjAsIDYpXHJcbiAgICAgICAgICAgIC5zZXRDb2xvcihDb2xvci5kYXJrZ3JheSlcclxuICAgICAgICAgICAgLmFkZFJlY3QoMC4wMSwgMC4wMSwgMC4wMTUsIDApXHJcbiAgICAgICAgICAgIC5taXJyb3JYKClcclxuICAgICAgICB0aGlzLm92ZXJsYXBEcmF3aW5nID0gbmV3IERyYXdpbmcoKTtcclxuICAgICAgICB0aGlzLm92ZXJsYXBEcmF3aW5nXHJcbiAgICAgICAgICAgIC5zZXRDb2xvcihDb2xvci5yZWQpXHJcbiAgICAgICAgICAgIC5hZGRSZWN0KDAuMDEsIDAuMDEsIDAuMDQpXHJcbiAgICAgICAgICAgIC5hZGRBcmMoMjAsIDE4KVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRTcGF3blBvc2l0aW9uKClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLmJvZHlTZWdtZW50cy5sZW5ndGg9PTApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9keVNlZ21lbnRzW3RoaXMuYm9keVNlZ21lbnRzLmxlbmd0aC0xXS5wb3NpdGlvbjtcclxuICAgIH1cclxuICAgIHVwZGF0ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYodGhpcy5zcGF3blJlbWFpbmluZyA+IDAgJiYgdGhpcy5hZ2UgJSAyMCA9PTApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNwYXduUmVtYWluaW5nLS07XHJcbiAgICAgICAgICAgIGxldCBkYW5nZXJTZWcgOmJvb2xlYW4gPSBNYXRoLmZsb29yKHRoaXMuYm9keVNlZ21lbnRzLmxlbmd0aC84KSUyPT0xO1xyXG4gICAgICAgICAgICBsZXQgbmV3U2VnID0gbmV3IEJvZHlTZWdtZW50KGRhbmdlclNlZyk7XHJcbiAgICAgICAgICAgIG5ld1NlZy5zZXRQb3NpdGlvbih0aGlzLnNwYXduUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmJvZHlTZWdtZW50cy5wdXNoKG5ld1NlZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHVwZGF0ZSBhbGwgdGhlIGJvZHkgc2VnbWVudCBwb3NpdGlvbnNcclxuICAgICAgICBmb3IobGV0IGk9dGhpcy5ib2R5U2VnbWVudHMubGVuZ3RoLTE7aT49MDtpLS0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgbW92ZVRhcmdldCA9IHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgICAgIGxldCBjU2VnID0gdGhpcy5ib2R5U2VnbWVudHNbaV07XHJcbiAgICAgICAgICAgIGlmKGk+MClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbW92ZVRhcmdldCA9IHRoaXMuYm9keVNlZ21lbnRzW2ktMV0ucG9zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IGNTZWcucG9zaXRpb24uZGlyZWN0aW9uVG8obW92ZVRhcmdldCk7XHJcbiAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IFZlY3Rvci5kaXN0YW5jZShjU2VnLnBvc2l0aW9uLCBtb3ZlVGFyZ2V0KTtcclxuICAgICAgICAgICAgY1NlZy5wb3NpdGlvbi5hZGREaXJlY3Rpb24oZGlyZWN0aW9uLCBkaXN0YW5jZSowLjA1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2VlIGhvdyBtYW55IGxpbmUgc2VnbWVudHMgb3ZlcmxhcFxyXG4gICAgICAgIGxldCBvdmVybGFwQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ib2R5U2VnbWVudHMubGVuZ3RoLTE7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBhID0gdGhpcy5ib2R5U2VnbWVudHNbaV0ucG9zaXRpb247XHJcbiAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmJvZHlTZWdtZW50c1tpKzFdLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICBmb3IobGV0IGo9aTtqPHRoaXMuYm9keVNlZ21lbnRzLmxlbmd0aC0xO2orKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoTWF0aC5hYnMoaS1qKTw0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IHRoaXMuYm9keVNlZ21lbnRzW2pdLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IHRoaXMuYm9keVNlZ21lbnRzW2orMV0ucG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICBpZihsaW5lSW50ZXJzZWN0aW5nKGEsYixjLGQpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXBDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW50ZXJzZWN0aW9uID0gbmV3IFZlY3RvcihhLngsIGEueSkuYWRkKGIpLmFkZChjKS5hZGQoZCkuZGl2aWRlKDQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9ucy5wdXNoKGludGVyc2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVybGFwRHJhd2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Um90YXRpb24odGhpcy5hZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQb3NpdGlvbihpbnRlcnNlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoS2V5Ym9hcmQua2V5RG93bltLZXlib2FyZC5MRUZUXSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gLT0gdGhpcy50dXJuU3BlZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKEtleWJvYXJkLmtleURvd25bS2V5Ym9hcmQuUklHSFRdKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbiArPSB0aGlzLnR1cm5TcGVlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHYgPSBuZXcgVmVjdG9yKDAsMCkuYWRkRGlyZWN0aW9uKHRoaXMucm90YXRpb24sIDEpO1xyXG4gICAgICAgIGlmKHRoaXMucG9zaXRpb24ueCA+IDEgfHwgdGhpcy5wb3NpdGlvbi54IDwgMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHYueCAqPSAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5wb3NpdGlvbi55ID4gMSB8fCB0aGlzLnBvc2l0aW9uLnkgPCAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdi55ICo9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gdi5yb3RhdGlvbigpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uYWRkRGlyZWN0aW9uKHRoaXMucm90YXRpb24sIHRoaXMubW92ZVNwZWVkKTtcclxuICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgd2UgYXJlIGVhdGluZyBhbiBhcHBsZVxyXG4gICAgICAgIGlmKHRoaXMuY2hlY2tPdmVybGFwKEFwcGxlLCAoYSk9PntcclxuICAgICAgICAgICAgYS5jaG9vc2VOZXdQb3NpdGlvbigpO1xyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gYWRkIHNjb3JlXHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9ucy5mb3JFYWNoKGludGVyc2VjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVGV4dEFjdG9yKGArMWApLnNldFBvc2l0aW9uKGludGVyc2VjdGlvbikuc2V0RHVyYXRpb24oMzApLnNldFZlbG9jaXR5KG5ldyBWZWN0b3IoMCwtMC4wMDEpKTtcclxuICAgICAgICAgICAgICAgIGcuc2NvcmUrPTE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBzdGFydCBzcGF3bmluZyBib2R5IHNlZ21lbnRzXHJcbiAgICAgICAgICAgIHRoaXMuc3Bhd25SZW1haW5pbmcgPSA4O1xyXG4gICAgICAgICAgICB0aGlzLnNwYXduUG9zaXRpb24gPSBuZXcgVmVjdG9yKHRoaXMuZ2V0U3Bhd25Qb3NpdGlvbigpLngsIHRoaXMuZ2V0U3Bhd25Qb3NpdGlvbigpLnkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFnLmdhbWVPdmVyICYmIHRoaXMuY2hlY2tPdmVybGFwKEJvZHlTZWdtZW50KSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBsZXQgcHMgPSBuZXcgUGFydGljbGVTeXN0ZW0oKTtcclxuICAgICAgICAgICAgcHMucG9zaXRpb24uc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcclxuICAgICAgICAgICAgcHMuY291bnQgPSAxMDtcclxuICAgICAgICAgICAgcHMuY29sb3IgPSBDb2xvci5ibHVlO1xyXG4gICAgICAgICAgICBnLmVuZEdhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgY29uc29sZS5sb2coXCJ3aW5kb3cgbG9hZGluZ1wiKTtcclxuICAgIENvbmZpZy50aXRsZSA9IFwiV09STSBEUklWRVwiO1xyXG4gICAgZyA9IG5ldyBXb3JtRHJpdmVHYW1lKCk7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1dvcm1Ecml2ZS50cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTs7QUFRQTtBQU5BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBOztBQVdBO0FBVEE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7O0FBY0E7QUFaQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7O0FBVUE7QUFSQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7QUFzSEE7QUFySEE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/*!**********************!*\
  !*** ./src/Mglue.ts ***!
  \**********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Color_1 = __webpack_require__(/*! ./Color */ 1);\r\nexports.Color = Color_1.Color;\r\nvar Game_1 = __webpack_require__(/*! ./Game */ 2);\r\nexports.Game = Game_1.Game;\r\nvar Display_1 = __webpack_require__(/*! ./Display */ 3);\r\nexports.Display = Display_1.Display;\r\nvar Actor_1 = __webpack_require__(/*! ./Actor */ 6);\r\nexports.Actor = Actor_1.Actor;\r\nexports.TextActor = Actor_1.TextActor;\r\nvar Config_1 = __webpack_require__(/*! ./Config */ 4);\r\nexports.Config = Config_1.Config;\r\nvar Mouse_1 = __webpack_require__(/*! ./Mouse */ 7);\r\nexports.Mouse = Mouse_1.Mouse;\r\nvar Vector_1 = __webpack_require__(/*! ./Vector */ 0);\r\nexports.Vector = Vector_1.Vector;\r\nvar ParticleSystem_1 = __webpack_require__(/*! ./ParticleSystem */ 12);\r\nexports.ParticleSystem = ParticleSystem_1.ParticleSystem;\r\nvar Keyboard_1 = __webpack_require__(/*! ./Keyboard */ 13);\r\nexports.Keyboard = Keyboard_1.Keyboard;\r\nvar Random_1 = __webpack_require__(/*! ./Random */ 9);\r\nexports.Random = Random_1.Random;\r\nvar Drawing_1 = __webpack_require__(/*! ./Drawing */ 5);\r\nexports.Drawing = Drawing_1.Drawing;\r\n__webpack_require__(/*! ./Extensions */ 8);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvTWdsdWUudHM/MzQ3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBDb2xvciB9IGZyb20gXCIuL0NvbG9yXCI7XHJcbmV4cG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9HYW1lXCJcclxuZXhwb3J0IHsgRGlzcGxheSB9IGZyb20gXCIuL0Rpc3BsYXlcIjtcclxuZXhwb3J0IHsgQWN0b3IsIFRleHRBY3RvciB9IGZyb20gXCIuL0FjdG9yXCI7XHJcbmV4cG9ydCB7IENvbmZpZyB9IGZyb20gXCIuL0NvbmZpZ1wiO1xyXG5leHBvcnQgeyBNb3VzZSB9IGZyb20gXCIuL01vdXNlXCI7XHJcbmV4cG9ydCB7IFZlY3RvciB9IGZyb20gXCIuL1ZlY3RvclwiO1xyXG5leHBvcnQgeyBQYXJ0aWNsZVN5c3RlbSB9IGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtXCJcclxuZXhwb3J0IHsgS2V5Ym9hcmQgfSBmcm9tIFwiLi9LZXlib2FyZFwiXHJcbmV4cG9ydCB7IFJhbmRvbSB9IGZyb20gXCIuL1JhbmRvbVwiXHJcbmV4cG9ydCB7IERyYXdpbmcgfSBmcm9tIFwiLi9EcmF3aW5nXCJcclxuaW1wb3J0IFwiLi9FeHRlbnNpb25zXCI7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9NZ2x1ZS50cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/*!*******************************!*\
  !*** ./src/ParticleSystem.ts ***!
  \*******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Actor_1 = __webpack_require__(/*! ./Actor */ 6);\r\nvar Game_1 = __webpack_require__(/*! ./Game */ 2);\r\nvar Color_1 = __webpack_require__(/*! ./Color */ 1);\r\nvar Vector_1 = __webpack_require__(/*! ./Vector */ 0);\r\nvar Random_1 = __webpack_require__(/*! ./Random */ 9);\r\nvar ParticleSystem = /** @class */ (function () {\r\n    function ParticleSystem() {\r\n        this.count = 1;\r\n        this.position = new Vector_1.Vector(0, 0);\r\n        this.angleWidth = 360;\r\n        this.speed = 0.01;\r\n        this.color = Color_1.Color.white;\r\n        this.size = 0.02;\r\n        this.duration = 30;\r\n        var actor = new ParticleActor();\r\n        actor.particleSystem = this;\r\n    }\r\n    return ParticleSystem;\r\n}());\r\nexports.ParticleSystem = ParticleSystem;\r\nvar ParticleActor = /** @class */ (function (_super) {\r\n    __extends(ParticleActor, _super);\r\n    function ParticleActor() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ParticleActor.prototype.update = function () {\r\n        if (this.particleSystem) {\r\n            // if we are generating particles, spawn them and bail\r\n            this.destroy();\r\n            var s = this.particleSystem;\r\n            if (s.count < 1) {\r\n                return;\r\n            }\r\n            for (var i = 0; i < s.count; i++) {\r\n                var p = new ParticleActor();\r\n                p.position.set(s.position.x, s.position.y);\r\n                p.velocity.addDirection(Random_1.Random.range(-s.angleWidth / 2, s.angleWidth / 2), s.speed * Random_1.Random.range(0.5, 1.5));\r\n                p.color = s.color;\r\n                p.size = s.size;\r\n                p.duration = s.duration;\r\n            }\r\n            return;\r\n        }\r\n        // otherwise just do a draw loop on ourself\r\n        Game_1.Game.display.fillRect(this.position.x, this.position.y, this.size, this.size, this.color);\r\n        if (this.age > this.duration) {\r\n            this.destroy();\r\n        }\r\n    };\r\n    return ParticleActor;\r\n}(Actor_1.Actor));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvUGFydGljbGVTeXN0ZW0udHM/MzhkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3RvciB9IGZyb20gXCIuL0FjdG9yXCI7XHJcbmltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9HYW1lXCI7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vQ29sb3JcIlxyXG5pbXBvcnQgeyBEaXNwbGF5IH0gZnJvbSBcIi4vRGlzcGxheVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcclxuaW1wb3J0IHsgUmFuZG9tIH0gZnJvbSBcIi4vUmFuZG9tXCI7XHJcblxyXG5jbGFzcyBQYXJ0aWNsZVN5c3RlbVxyXG57XHJcbiAgICBjb3VudCA6IG51bWJlciA9IDE7XHJcbiAgICBwb3NpdGlvbiA6IFZlY3RvciA9IG5ldyBWZWN0b3IoMCwwKTtcclxuICAgIGFuZ2xlV2lkdGggOiBudW1iZXIgPSAzNjA7XHJcbiAgICBzcGVlZCA6IG51bWJlciA9IDAuMDE7XHJcbiAgICBjb2xvciA6IENvbG9yID0gQ29sb3Iud2hpdGU7XHJcbiAgICBzaXplIDogbnVtYmVyID0gMC4wMjtcclxuICAgIGR1cmF0aW9uIDogbnVtYmVyID0gMzA7XHJcbiAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGFjdG9yID0gbmV3IFBhcnRpY2xlQWN0b3IoKTtcclxuICAgICAgICBhY3Rvci5wYXJ0aWNsZVN5c3RlbSA9IHRoaXM7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUGFydGljbGVBY3RvciBleHRlbmRzIEFjdG9yXHJcbntcclxuICAgIHBhcnRpY2xlU3lzdGVtIDogUGFydGljbGVTeXN0ZW07XHJcbiAgICBwcml2YXRlIGNvbG9yIDogQ29sb3I7XHJcbiAgICBwcml2YXRlIHNpemUgOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGR1cmF0aW9uIDogbnVtYmVyO1xyXG4gICAgdXBkYXRlKClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLnBhcnRpY2xlU3lzdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gaWYgd2UgYXJlIGdlbmVyYXRpbmcgcGFydGljbGVzLCBzcGF3biB0aGVtIGFuZCBiYWlsXHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBsZXQgcyA9IHRoaXMucGFydGljbGVTeXN0ZW07XHJcbiAgICAgICAgICAgIGlmKHMuY291bnQgPCAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5jb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcCA9IG5ldyBQYXJ0aWNsZUFjdG9yKCk7XHJcbiAgICAgICAgICAgICAgICBwLnBvc2l0aW9uLnNldChzLnBvc2l0aW9uLngsIHMucG9zaXRpb24ueSk7XHJcbiAgICAgICAgICAgICAgICBwLnZlbG9jaXR5LmFkZERpcmVjdGlvbihSYW5kb20ucmFuZ2UoLXMuYW5nbGVXaWR0aC8yLCBzLmFuZ2xlV2lkdGgvMiksIHMuc3BlZWQgKiBSYW5kb20ucmFuZ2UoMC41LCAxLjUpKTtcclxuICAgICAgICAgICAgICAgIHAuY29sb3IgPSBzLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgcC5zaXplID0gcy5zaXplO1xyXG4gICAgICAgICAgICAgICAgcC5kdXJhdGlvbiA9IHMuZHVyYXRpb247ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGp1c3QgZG8gYSBkcmF3IGxvb3Agb24gb3Vyc2VsZlxyXG4gICAgICAgIEdhbWUuZGlzcGxheS5maWxsUmVjdCh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSwgdGhpcy5zaXplLCB0aGlzLnNpemUsIHRoaXMuY29sb3IpO1xyXG4gICAgICAgIGlmKHRoaXMuYWdlID4gdGhpcy5kdXJhdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnQgeyBQYXJ0aWNsZVN5c3RlbSB9XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1BhcnRpY2xlU3lzdGVtLnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFTQTtBQVBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQW9DQTtBQW5DQTtBQUFBO0FBQUE7O0FBa0NBO0FBNUJBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/*!*************************!*\
  !*** ./src/Keyboard.ts ***!
  \*************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Keyboard = /** @class */ (function () {\r\n    function Keyboard() {\r\n    }\r\n    Keyboard.initialize = function () {\r\n        Keyboard.keyDown = [];\r\n        for (var i = 0; i < 255; i++) {\r\n            Keyboard.keyDown[i] = false;\r\n            window.onkeydown = function (e) {\r\n                Keyboard.keyDown[e.keyCode] = true;\r\n                if (e.keyCode >= 37 && e.keyCode <= 40) {\r\n                    e.preventDefault();\r\n                }\r\n            };\r\n            window.onkeyup = function (e) {\r\n                Keyboard.keyDown[e.keyCode] = false;\r\n            };\r\n        }\r\n    };\r\n    Keyboard.LEFT = 37;\r\n    Keyboard.UP = 38;\r\n    Keyboard.RIGHT = 39;\r\n    Keyboard.DOWN = 40;\r\n    return Keyboard;\r\n}());\r\nexports.Keyboard = Keyboard;\r\nKeyboard.initialize();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvS2V5Ym9hcmQudHM/MmZjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcclxuaW1wb3J0IHsgRGlzcGxheSB9IGZyb20gXCIuL0Rpc3BsYXlcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBLZXlib2FyZFxyXG57XHJcbiAgICBzdGF0aWMga2V5RG93bjogYm9vbGVhbltdO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IExFRlQgPSAzNztcclxuICAgIHN0YXRpYyByZWFkb25seSBVUCA9IDM4O1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IFJJR0hUID0gMzk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgRE9XTiA9IDQwO1xyXG4gICAgXHJcbiAgICBzdGF0aWMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgS2V5Ym9hcmQua2V5RG93biA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU1OyBpKyspIHtcclxuICAgICAgICAgICAgS2V5Ym9hcmQua2V5RG93bltpXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB3aW5kb3cub25rZXlkb3duID0gKGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEtleWJvYXJkLmtleURvd25bZS5rZXlDb2RlXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZihlLmtleUNvZGUgPj0gMzcgJiYgZS5rZXlDb2RlIDw9IDQwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpbmRvdy5vbmtleXVwID0gKGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEtleWJvYXJkLmtleURvd25bZS5rZXlDb2RlXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbktleWJvYXJkLmluaXRpYWxpemUoKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvS2V5Ym9hcmQudHMiXSwibWFwcGluZ3MiOiI7O0FBR0E7QUFBQTtBQTJCQTtBQW5CQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7QUFDQTtBQUNBO0FBQ0E7QUFxQkE7QUFBQTtBQTNCQTtBQTRCQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n");

/***/ })
/******/ ]);